import{u as j}from"./app-DqkBhIqL.js";import{a as G,S as x}from"./SalesButton-Bck0Vs7e.js";import{a as g,S as H}from"./SalesSelector-Ckk41PFW.js";import{d as W,r as p,o as J,c as i,j as l,a as e,b as w,F as K,f as R,e as m,t as u,g as n,n as X}from"./index.standard-DHpxIVC0.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"settings-page"},ee={class:"settings-container"},te={class:"settings-nav"},se=["onClick"],ae={class:"card-icon"},le={class:"card-content"},ie={class:"card-title"},ne={class:"card-desc"},oe={key:0,class:"card-indicator"},ce={class:"settings-content"},ue={key:0,class:"loading-container"},de={key:1,class:"settings-section"},ve={class:"setting-group"},re={class:"setting-item"},pe={class:"setting-item"},we={class:"setting-item"},xe={key:2,class:"settings-section"},fe={class:"setting-group"},ge={class:"setting-item"},me={class:"setting-item"},he={class:"setting-item"},be=["checked"],ke={key:3,class:"settings-section"},ye={key:4,class:"settings-section"},_e={class:"info-group"},Ce={class:"info-item"},Se={class:"info-value"},Te={class:"info-item"},ze={class:"info-value"},Be={class:"info-item"},Ne={class:"info-value"},Fe={class:"system-actions"},Le={key:5,class:"settings-section"},Ve={class:"data-stats"},De={class:"stat-item"},Me={class:"stat-number"},Ie={class:"stat-item"},Oe={class:"stat-number"},qe={class:"stat-item"},Ae={class:"stat-number"},Ue={class:"data-actions"},Pe={key:0,class:"save-indicator"},Qe={class:"save-content"},Ee={class:"save-actions"},$e=W({__name:"index",setup(je){const h=j(),d=p(!1),b=p(!1),o=p("preferences"),c=p(!1),T=[{key:"preferences",title:"界面偏好",description:"主题、字体、语言",icon:"🎨"},{key:"business",title:"业务设置",description:"工作流程优化",icon:"💼"},{key:"help",title:"帮助支持",description:"使用指南、反馈",icon:"❓"},{key:"system",title:"系统信息",description:"版本、更新信息",icon:"ℹ️"},{key:"data",title:"数据管理",description:"缓存、导出、重置",icon:"🗂️"}],v=p({theme:"light",fontSize:"medium",language:"zh-CN"}),r=p({defaultContact:"",quoteValidDays:"30",autoSave:!0}),k=p({version:"1.0.0",buildNumber:"2025.01.08.001",updateTime:"2025-01-08"}),f=p({drafts:3,cacheSize:"12.5MB",totalQuotes:156}),z=[{label:"浅色模式",value:"light"},{label:"深色模式",value:"dark"},{label:"跟随系统",value:"auto"}],B=[{label:"小",value:"small"},{label:"中",value:"medium"},{label:"大",value:"large"},{label:"超大",value:"xlarge"}],N=[{label:"中文简体",value:"zh-CN"},{label:"中文繁体",value:"zh-TW"},{label:"English",value:"en-US"}],F=[{label:"7天",value:"7"},{label:"15天",value:"15"},{label:"30天",value:"30"},{label:"60天",value:"60"},{label:"90天",value:"90"}];function L(s){c.value?uni.showModal({title:"切换分类",content:"当前有未保存的更改，切换分类将丢失这些更改。确定要继续吗？",success:t=>{t.confirm&&(C(),o.value=s)}}):o.value=s}function y(s,t){v.value[s]=t,c.value=!0}function _(s,t){r.value[s]=t,c.value=!0}async function V(){b.value=!0;try{h.updateSettings({preferences:v.value,business:r.value}),c.value=!1,uni.showToast({title:"设置已保存",icon:"success"})}catch(s){console.error("保存设置失败:",s),uni.showToast({title:"保存失败",icon:"error"})}finally{b.value=!1}}function C(){c.value=!1,S()}function S(){d.value=!0;try{h.loadSettings();const s=h.settings;s.preferences&&(v.value={...v.value,...s.preferences}),s.business&&(r.value={...r.value,...s.business})}catch(s){console.error("加载设置失败:",s)}finally{d.value=!1}}function D(){c.value?uni.showModal({title:"未保存更改",content:"您有未保存的更改，确定要离开吗？",success:s=>{s.confirm&&uni.navigateBack()}}):uni.navigateBack()}function M(){uni.showToast({title:"即将打开使用指南",icon:"none"})}function I(){uni.showToast({title:"即将打开常见问题",icon:"none"})}function O(){uni.showActionSheet({itemList:["拨打客服电话","发送邮件","在线客服"],success:s=>{const t=["拨打客服电话","发送邮件","在线客服"];uni.showToast({title:`选择了: ${t[s.tapIndex]}`,icon:"none"})}})}function q(){uni.navigateTo({url:"/pages/sales/feedback/index"})}function A(){uni.showLoading({title:"检查中..."}),setTimeout(()=>{uni.hideLoading(),uni.showToast({title:"已是最新版本",icon:"success"})},2e3)}function U(){uni.showToast({title:"即将打开隐私政策",icon:"none"})}function P(){uni.showToast({title:"即将打开服务条款",icon:"none"})}function Q(){uni.showModal({title:"清除缓存",content:"确定要清除应用缓存吗？这不会影响您的报价数据。",success:s=>{s.confirm&&(uni.showLoading({title:"清除中..."}),setTimeout(()=>{uni.hideLoading(),f.value.cacheSize="0MB",uni.showToast({title:"缓存已清除",icon:"success"})},1500))}})}function E(){uni.showLoading({title:"导出中..."}),setTimeout(()=>{uni.hideLoading(),uni.showToast({title:"数据导出成功",icon:"success"})},2e3)}function $(){uni.showModal({title:"重置设置",content:"确定要将所有设置重置为默认值吗？此操作不可撤销。",confirmColor:"#FF3B30",success:s=>{s.confirm&&(v.value={theme:"light",fontSize:"medium",language:"zh-CN"},r.value={defaultContact:"",quoteValidDays:"30",autoSave:!0},c.value=!0,uni.showToast({title:"设置已重置",icon:"success"}))}})}return J(()=>{S(),uni.setNavigationBarTitle({title:"应用设置"})}),(s,t)=>(n(),i("view",Z,[l(G,{title:"应用设置","show-back":!0,onBack:D}),e("view",ee,[e("view",te,[(n(),i(K,null,R(T,a=>e("view",{key:a.key,class:X(["nav-card",{active:o.value===a.key}]),onClick:Ge=>L(a.key)},[e("view",ae,[e("text",null,u(a.icon),1)]),e("view",le,[e("text",ie,u(a.title),1),e("text",ne,u(a.description),1)]),c.value&&o.value===a.key?(n(),i("view",oe,t[6]||(t[6]=[e("text",{class:"indicator-dot"},"●",-1)]))):w("",!0)],10,se)),64))]),e("view",ce,[d.value?(n(),i("view",ue,t[7]||(t[7]=[e("text",{class:"loading-text"},"加载中...",-1)]))):w("",!0),o.value==="preferences"&&!d.value?(n(),i("view",de,[t[11]||(t[11]=e("view",{class:"section-header"},[e("text",{class:"section-title"},"🎨 界面偏好"),e("text",{class:"section-desc"},"个性化您的应用外观")],-1)),e("view",ve,[e("view",re,[t[8]||(t[8]=e("view",{class:"setting-label"},[e("text",{class:"label-text"},"主题模式"),e("text",{class:"label-desc"},"选择您喜欢的界面风格")],-1)),l(g,{value:v.value.theme,options:z,onChange:t[0]||(t[0]=a=>y("theme",a))},null,8,["value"])]),e("view",pe,[t[9]||(t[9]=e("view",{class:"setting-label"},[e("text",{class:"label-text"},"字体大小"),e("text",{class:"label-desc"},"调整文字显示大小")],-1)),l(g,{value:v.value.fontSize,options:B,onChange:t[1]||(t[1]=a=>y("fontSize",a))},null,8,["value"])]),e("view",we,[t[10]||(t[10]=e("view",{class:"setting-label"},[e("text",{class:"label-text"},"语言"),e("text",{class:"label-desc"},"选择界面显示语言")],-1)),l(g,{value:v.value.language,options:N,onChange:t[2]||(t[2]=a=>y("language",a))},null,8,["value"])])])])):w("",!0),o.value==="business"&&!d.value?(n(),i("view",xe,[t[15]||(t[15]=e("view",{class:"section-header"},[e("text",{class:"section-title"},"💼 业务设置"),e("text",{class:"section-desc"},"优化您的工作流程")],-1)),e("view",fe,[e("view",ge,[t[12]||(t[12]=e("view",{class:"setting-label"},[e("text",{class:"label-text"},"默认联系方式"),e("text",{class:"label-desc"},"新建报价时的默认联系方式")],-1)),l(H,{value:r.value.defaultContact,placeholder:"输入默认联系方式",onInput:t[3]||(t[3]=a=>_("defaultContact",a))},null,8,["value"])]),e("view",me,[t[13]||(t[13]=e("view",{class:"setting-label"},[e("text",{class:"label-text"},"默认报价有效期"),e("text",{class:"label-desc"},"报价单的默认有效天数")],-1)),l(g,{value:r.value.quoteValidDays,options:F,onChange:t[4]||(t[4]=a=>_("quoteValidDays",a))},null,8,["value"])]),e("view",he,[t[14]||(t[14]=e("view",{class:"setting-label"},[e("text",{class:"label-text"},"自动保存草稿"),e("text",{class:"label-desc"},"编辑报价时自动保存")],-1)),e("switch",{checked:r.value.autoSave,onChange:t[5]||(t[5]=a=>_("autoSave",a.detail.value)),color:"#007AFF"},null,40,be)])])])):w("",!0),o.value==="help"&&!d.value?(n(),i("view",ke,[t[20]||(t[20]=e("view",{class:"section-header"},[e("text",{class:"section-title"},"❓ 帮助支持"),e("text",{class:"section-desc"},"获取帮助和支持")],-1)),e("view",{class:"help-list"},[e("view",{class:"help-item",onClick:M},t[16]||(t[16]=[m('<view class="help-icon" data-v-1ad76ed3>📖</view><view class="help-content" data-v-1ad76ed3><text class="help-title" data-v-1ad76ed3>使用指南</text><text class="help-desc" data-v-1ad76ed3>了解如何使用各项功能</text></view><text class="help-arrow" data-v-1ad76ed3>›</text>',3)])),e("view",{class:"help-item",onClick:I},t[17]||(t[17]=[m('<view class="help-icon" data-v-1ad76ed3>💡</view><view class="help-content" data-v-1ad76ed3><text class="help-title" data-v-1ad76ed3>常见问题</text><text class="help-desc" data-v-1ad76ed3>快速解决常见疑问</text></view><text class="help-arrow" data-v-1ad76ed3>›</text>',3)])),e("view",{class:"help-item",onClick:O},t[18]||(t[18]=[m('<view class="help-icon" data-v-1ad76ed3>📞</view><view class="help-content" data-v-1ad76ed3><text class="help-title" data-v-1ad76ed3>联系支持</text><text class="help-desc" data-v-1ad76ed3>遇到问题？联系我们</text></view><text class="help-arrow" data-v-1ad76ed3>›</text>',3)])),e("view",{class:"help-item",onClick:q},t[19]||(t[19]=[m('<view class="help-icon" data-v-1ad76ed3>💬</view><view class="help-content" data-v-1ad76ed3><text class="help-title" data-v-1ad76ed3>意见反馈</text><text class="help-desc" data-v-1ad76ed3>告诉我们您的建议</text></view><text class="help-arrow" data-v-1ad76ed3>›</text>',3)]))])])):w("",!0),o.value==="system"&&!d.value?(n(),i("view",ye,[t[25]||(t[25]=e("view",{class:"section-header"},[e("text",{class:"section-title"},"ℹ️ 系统信息"),e("text",{class:"section-desc"},"应用版本和系统信息")],-1)),e("view",_e,[e("view",Ce,[t[21]||(t[21]=e("text",{class:"info-label"},"应用版本",-1)),e("text",Se,u(k.value.version),1)]),e("view",Te,[t[22]||(t[22]=e("text",{class:"info-label"},"构建版本",-1)),e("text",ze,u(k.value.buildNumber),1)]),e("view",Be,[t[23]||(t[23]=e("text",{class:"info-label"},"更新时间",-1)),e("text",Ne,u(k.value.updateTime),1)]),e("view",{class:"info-item",onClick:A},t[24]||(t[24]=[e("text",{class:"info-label"},"检查更新",-1),e("text",{class:"info-value link"},"点击检查",-1)]))]),e("view",Fe,[l(x,{text:"隐私政策",type:"outline",onClick:U}),l(x,{text:"服务条款",type:"outline",onClick:P})])])):w("",!0),o.value==="data"&&!d.value?(n(),i("view",Le,[t[29]||(t[29]=e("view",{class:"section-header"},[e("text",{class:"section-title"},"🗂️ 数据管理"),e("text",{class:"section-desc"},"管理您的应用数据")],-1)),e("view",Ve,[e("view",De,[e("text",Me,u(f.value.drafts),1),t[26]||(t[26]=e("text",{class:"stat-label"},"草稿数量",-1))]),e("view",Ie,[e("text",Oe,u(f.value.cacheSize),1),t[27]||(t[27]=e("text",{class:"stat-label"},"缓存大小",-1))]),e("view",qe,[e("text",Ae,u(f.value.totalQuotes),1),t[28]||(t[28]=e("text",{class:"stat-label"},"历史报价",-1))])]),e("view",Ue,[l(x,{text:"清除缓存",type:"outline",onClick:Q}),l(x,{text:"导出数据",type:"primary",onClick:E}),l(x,{text:"重置设置",type:"danger",onClick:$})])])):w("",!0)])]),c.value?(n(),i("view",Pe,[e("view",Qe,[t[30]||(t[30]=e("text",{class:"save-text"},"有未保存的更改",-1)),e("view",Ee,[l(x,{text:"取消",type:"outline",size:"small",onClick:C}),l(x,{text:"保存",type:"primary",size:"small",loading:b.value,onClick:V},null,8,["loading"])])])])):w("",!0)]))}}),Xe=Y($e,[["__scopeId","data-v-1ad76ed3"]]);export{Xe as default};
