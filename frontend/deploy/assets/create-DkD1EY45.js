import{S,a as Pe}from"./SalesButton-Bck0Vs7e.js";import{S as K,a as ye}from"./SalesSelector-Ckk41PFW.js";import{d as ie,c as r,b as p,a as e,n as Y,t as o,g as a,h as re,r as T,i as $,o as we,w as xe,j as _,k as y,F as se,f as oe,l as ae,m as te,p as V,q as Ve,s as Fe,v as he,x as be,y as ke,z as Te,A as Ce,B as $e,C as ge,Q as Se,D as Ne}from"./index.standard-DHpxIVC0.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const qe={class:"sales-form-item"},Ie=["value","placeholder","maxlength","disabled","auto-height"],De={key:1,class:"sales-textarea-count"},Me={key:2,class:"sales-form-error"},ze={key:3,class:"sales-form-help"},Ue=ie({__name:"SalesTextarea",props:{modelValue:{default:""},label:{},placeholder:{},required:{type:Boolean,default:!1},maxlength:{default:500},disabled:{type:Boolean,default:!1},error:{},help:{},autoHeight:{type:Boolean,default:!0},showCount:{type:Boolean,default:!0}},emits:["update:modelValue","blur","focus"],setup(ee,{emit:k}){const c=k,U=v=>{const w=v.target;c("update:modelValue",w.value)},s=v=>{c("blur",v)},P=v=>{c("focus",v)};return(v,w)=>(a(),r("view",qe,[v.label?(a(),r("label",{key:0,class:Y(["sales-form-label",{required:v.required}])},o(v.label),3)):p("",!0),e("textarea",{class:Y(["sales-input sales-input-textarea",{"sales-input-error":!!v.error,"sales-input-disabled":v.disabled}]),value:v.modelValue,placeholder:v.placeholder,maxlength:v.maxlength,disabled:v.disabled,"auto-height":v.autoHeight,onInput:U,onBlur:s,onFocus:P},null,42,Ie),v.showCount&&v.maxlength?(a(),r("view",De,o(v.modelValue.length)+"/"+o(v.maxlength),1)):p("",!0),v.error?(a(),r("view",Me,o(v.error),1)):p("",!0),v.help&&!v.error?(a(),r("view",ze,o(v.help),1)):p("",!0)]))}}),Ae=ne(Ue,[["__scopeId","data-v-1ab187c2"]]),Ee={class:"step-customer"},Be={class:"customer-card"},Oe={class:"form-group"},Re={key:0,class:"success-icon"},We={key:0,class:"success-icon"},Qe={key:0,class:"format-hint"},je={class:"form-group"},Le={class:"customer-types"},He=["onClick"],Je={class:"type-icon"},Ke={class:"type-name"},Ye={key:0,class:"type-discount"},Ze={class:"customer-card"},Ge={class:"form-group"},Xe={class:"customer-card"},et={class:"collapse-icon"},tt={key:0,class:"address-content"},st={class:"location-row"},ot={class:"quick-actions"},lt={key:0,class:"checkbox-check"},at={class:"step-actions"},it=ie({__name:"StepCustomer",props:{form:{},errors:{}},emits:["update:form","next","validate"],setup(ee,{emit:k}){const c=ee,U=k,s=re({customerName:c.form.customerName||"",customerPhone:c.form.customerPhone||"",customerWechat:c.form.customerWechat||"",customerEmail:c.form.customerEmail||"",customerProvince:c.form.customerProvince||"",customerCity:c.form.customerCity||"",customerAddress:c.form.customerAddress||"",customerType:c.form.customerType||"individual",customerRemark:c.form.customerRemark||"",saveCustomer:c.form.saveCustomer||!0}),P=T(!1),v=T(!1),w=[{value:"individual",label:"ä¸ªäººå®¢æˆ·",icon:"ğŸ‘¤",discount:0,description:"ä¸ªäººè´­ä¹°"},{value:"company",label:"ä¼ä¸šå®¢æˆ·",icon:"ğŸ¢",discount:5,description:"ä¼ä¸šé‡‡è´­"},{value:"dealer",label:"ç»é”€å•†",icon:"ğŸ¤",discount:10,description:"æ‰¹å‘åˆä½œ"},{value:"club",label:"ä¿±ä¹éƒ¨",icon:"ğŸ¯",discount:8,description:"åœºé¦†é‡‡è´­"}],I=T([{label:"äº‘å—çœ",value:"yunnan"},{label:"å››å·çœ",value:"sichuan"},{label:"è´µå·çœ",value:"guizhou"}]),E=T([]),F={yunnan:[{label:"æ˜†æ˜å¸‚",value:"kunming"},{label:"å¤§ç†å·",value:"dali"},{label:"ä¸½æ±Ÿå¸‚",value:"lijiang"}],sichuan:[{label:"æˆéƒ½å¸‚",value:"chengdu"},{label:"ç»µé˜³å¸‚",value:"mianyang"}],guizhou:[{label:"è´µé˜³å¸‚",value:"guiyang"},{label:"éµä¹‰å¸‚",value:"zunyi"}]},M=$(()=>/^1[3-9]\d{9}$/.test(s.customerPhone)),Q=$(()=>s.customerName.trim().length>=2&&M.value&&!c.errors.customerName&&!c.errors.customerPhone),b=t=>{var h;const u=typeof t=="string"?t:((h=t.target)==null?void 0:h.value)||"";s.customerName=u.trim(),u.trim()&&(c.errors.customerName=""),g()},z=t=>{var le;const h=(typeof t=="string"?t:((le=t.target)==null?void 0:le.value)||"").replace(/\D/g,"");s.customerPhone=h,h&&(c.errors.customerPhone=""),g()},q=()=>{const t=s.customerName.trim();return t?t.length<2?(c.errors.customerName="å§“åè‡³å°‘2ä¸ªå­—ç¬¦",!1):t.length>20?(c.errors.customerName="å§“åä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦",!1):/^[\u4e00-\u9fa5a-zA-Z\s]+$/.test(t)?(c.errors.customerName="",!0):(c.errors.customerName="å§“ååªèƒ½åŒ…å«ä¸­æ–‡ã€è‹±æ–‡å’Œç©ºæ ¼",!1):(c.errors.customerName="è¯·è¾“å…¥å®¢æˆ·å§“å",!1)},D=()=>s.customerPhone.trim()?M.value?(c.errors.customerPhone="",!0):(c.errors.customerPhone="è¯·è¾“å…¥æ­£ç¡®çš„11ä½æ‰‹æœºå·ç ",!1):(c.errors.customerPhone="è¯·è¾“å…¥æ‰‹æœºå·ç ",!1),B=()=>{const t=s.customerWechat.trim();return t&&t.length<6?(c.errors.customerWechat="å¾®ä¿¡å·è‡³å°‘6ä½",!1):(c.errors.customerWechat="",!0)},R=()=>{const t=s.customerEmail.trim();return t&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?(c.errors.customerEmail="è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼",!1):(c.errors.customerEmail="",!0)},j=t=>{s.customerType=t,g();const u=w.find(h=>h.value===t);(u==null?void 0:u.discount)>0&&ae.success(`å·²é€‰æ‹©${u.label}ï¼Œäº«${u.discount}%ä¼˜æƒ `,2e3)},L=t=>t.length===11?t.replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3"):t,J=()=>{const t=s.customerWechat.trim();/^1[3-9]\d{9}$/.test(t)?(s.customerPhone=t,D(),g(),ae.success("å·²åŒæ­¥åˆ°æ‰‹æœºå·")):ae.show("å¾®ä¿¡å·æ ¼å¼ä¸æ˜¯æ‰‹æœºå·","none")},Z=t=>{s.customerProvince=t,s.customerCity="",E.value=F[t]||[],g()},G=t=>{s.customerCity=t,g()},H=()=>{v.value=!0,Ve.getCurrentPosition().then(t=>{setTimeout(()=>{s.customerAddress="æ˜†æ˜å¸‚äº”ååŒºä¸œé£è¥¿è·¯123å·",v.value=!1,g(),ae.success("å®šä½æˆåŠŸ")},1e3)}).catch(()=>{v.value=!1,Fe.confirm({title:"å®šä½å¤±è´¥",content:"æ— æ³•è·å–ä½ç½®ä¿¡æ¯ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥"})})},f=()=>{s.saveCustomer=!s.saveCustomer,g()},g=()=>{const t={...s};console.log("Emitting form update:",t),U("update:form",t)},i=()=>{q()&&D()&&B()&&R()&&U("next")};return we(()=>{g()}),xe(()=>c.form,t=>{Object.assign(s,t)},{deep:!0}),(t,u)=>(a(),r("view",Ee,[u[22]||(u[22]=e("view",{class:"step-header"},[e("text",{class:"step-title"},"å®¢æˆ·ä¿¡æ¯"),e("text",{class:"step-subtitle"},"è¯·å¡«å†™å®¢æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¸¦ * ä¸ºå¿…å¡«é¡¹")],-1)),e("view",Be,[u[11]||(u[11]=e("view",{class:"card-title"},[e("text",{class:"title-icon"},"ğŸ‘¤"),e("text",{class:"title-text"},"åŸºæœ¬ä¿¡æ¯")],-1)),e("view",Oe,[_(K,{modelValue:s.customerName,"onUpdate:modelValue":u[0]||(u[0]=h=>s.customerName=h),label:"å®¢æˆ·å§“å *",placeholder:"è¯·è¾“å…¥çœŸå®å§“å",required:!0,error:t.errors.customerName,onInput:b,onBlur:q},{suffix:y(()=>[s.customerName&&!t.errors.customerName?(a(),r("view",Re," âœ“ ")):p("",!0)]),_:1},8,["modelValue","error"]),_(K,{modelValue:s.customerPhone,"onUpdate:modelValue":u[1]||(u[1]=h=>s.customerPhone=h),label:"è”ç³»ç”µè¯ *",placeholder:"è¯·è¾“å…¥11ä½æ‰‹æœºå·ç ",type:"tel",maxlength:11,required:!0,error:t.errors.customerPhone,onInput:z,onBlur:D},{suffix:y(()=>[M.value&&!t.errors.customerPhone?(a(),r("view",We," âœ“ ")):p("",!0)]),help:y(()=>[s.customerPhone&&!t.errors.customerPhone?(a(),r("text",Qe,o(L(s.customerPhone)),1)):p("",!0)]),_:1},8,["modelValue","error"])]),e("view",je,[u[9]||(u[9]=e("text",{class:"group-label"},"å®¢æˆ·ç±»å‹",-1)),u[10]||(u[10]=e("text",{class:"group-hint"},"é€‰æ‹©åˆé€‚çš„å®¢æˆ·ç±»å‹ï¼Œäº«å—å¯¹åº”ä¼˜æƒ ",-1)),e("view",Le,[(a(),r(se,null,oe(w,h=>e("view",{key:h.value,class:Y(["type-card",{"type-card--selected":s.customerType===h.value}]),onClick:le=>j(h.value)},[e("text",Je,o(h.icon),1),e("text",Ke,o(h.label),1),h.discount?(a(),r("text",Ye,o(h.discount)+"% ä¼˜æƒ  ",1)):p("",!0)],10,He)),64))])])]),e("view",Ze,[u[15]||(u[15]=e("view",{class:"card-title"},[e("text",{class:"title-icon"},"ğŸ“"),e("text",{class:"title-text"},"è”ç³»æ–¹å¼"),e("text",{class:"optional-badge"},"é€‰å¡«")],-1)),e("view",Ge,[_(K,{modelValue:s.customerWechat,"onUpdate:modelValue":u[2]||(u[2]=h=>s.customerWechat=h),label:"å¾®ä¿¡å·",placeholder:"å¾®ä¿¡å·/æ‰‹æœºå·å‡å¯",error:t.errors.customerWechat,onBlur:B},{prefix:y(()=>u[12]||(u[12]=[e("text",{class:"input-icon"},"ğŸ’¬",-1)])),suffix:y(()=>[s.customerWechat&&!s.customerPhone?(a(),te(S,{key:0,size:"mini",type:"plain",onClick:J},{default:y(()=>u[13]||(u[13]=[V(" åŒæ­¥ ",-1)])),_:1,__:[13]})):p("",!0)]),_:1},8,["modelValue","error"]),_(K,{modelValue:s.customerEmail,"onUpdate:modelValue":u[3]||(u[3]=h=>s.customerEmail=h),label:"é‚®ç®±åœ°å€",placeholder:"ç”¨äºå‘é€æŠ¥ä»·å•",type:"email",error:t.errors.customerEmail,onBlur:R},{prefix:y(()=>u[14]||(u[14]=[e("text",{class:"input-icon"},"ğŸ“§",-1)])),_:1},8,["modelValue","error"])])]),e("view",Xe,[e("view",{class:"card-title",onClick:u[4]||(u[4]=h=>P.value=!P.value)},[u[16]||(u[16]=e("text",{class:"title-icon"},"ğŸ“",-1)),u[17]||(u[17]=e("text",{class:"title-text"},"åœ°å€ä¿¡æ¯",-1)),u[18]||(u[18]=e("text",{class:"optional-badge"},"é€‰å¡«",-1)),e("text",et,o(P.value?"â–²":"â–¼"),1)]),P.value?(a(),r("view",tt,[e("view",st,[_(ye,{modelValue:s.customerProvince,"onUpdate:modelValue":u[5]||(u[5]=h=>s.customerProvince=h),label:"çœä»½",placeholder:"é€‰æ‹©çœä»½",options:I.value,onChange:Z,class:"location-select"},null,8,["modelValue","options"]),_(ye,{modelValue:s.customerCity,"onUpdate:modelValue":u[6]||(u[6]=h=>s.customerCity=h),label:"åŸå¸‚",placeholder:"é€‰æ‹©åŸå¸‚",options:E.value,disabled:!s.customerProvince,onChange:G,class:"location-select"},null,8,["modelValue","options","disabled"])]),_(K,{modelValue:s.customerAddress,"onUpdate:modelValue":u[7]||(u[7]=h=>s.customerAddress=h),label:"è¯¦ç»†åœ°å€",placeholder:"è¡—é“ã€é—¨ç‰Œå·ã€å°åŒºæ¥¼æ ‹ç­‰",maxlength:100,error:t.errors.customerAddress},{suffix:y(()=>[_(S,{size:"mini",type:"plain",onClick:H,loading:v.value},{default:y(()=>u[19]||(u[19]=[V(" å®šä½ ",-1)])),_:1,__:[19]},8,["loading"])]),_:1},8,["modelValue","error"]),_(Ae,{modelValue:s.customerRemark,"onUpdate:modelValue":u[8]||(u[8]=h=>s.customerRemark=h),label:"å¤‡æ³¨ä¿¡æ¯",placeholder:"ç‰¹æ®Šè¦æ±‚ã€åå¥½ç­‰",maxlength:200,"show-count":!0,"auto-height":!0},null,8,["modelValue"])])):p("",!0)]),e("view",ot,[e("view",{class:"save-option",onClick:f},[e("view",{class:Y(["checkbox",{"checkbox--checked":s.saveCustomer}])},[s.saveCustomer?(a(),r("text",lt,"âœ“")):p("",!0)],2),u[20]||(u[20]=e("text",{class:"option-text"},"ä¿å­˜å®¢æˆ·ä¿¡æ¯ï¼Œä¾¿äºä¸‹æ¬¡ä½¿ç”¨",-1))])]),e("view",at,[_(S,{type:"primary",block:!0,onClick:i,disabled:!Q.value},{default:y(()=>u[21]||(u[21]=[V(" ä¸‹ä¸€æ­¥ï¼šé€‰æ‹©äº§å“ ",-1)])),_:1,__:[21]},8,["disabled"])])]))}}),nt=ne(it,[["__scopeId","data-v-cbec750a"]]),rt={class:"step-products"},ut={class:"step-header"},ct={class:"step-subtitle"},dt={key:0},mt={class:"search-filter-bar"},vt={class:"search-box"},pt={class:"chips-container"},ft=["onClick"],gt={class:"chip-icon"},_t={class:"chip-name"},yt={key:0,class:"selected-summary"},wt={class:"summary-title"},xt={class:"summary-total"},ht={class:"expand-icon"},bt={key:0,class:"selected-list"},kt=["src"],$t={class:"item-info"},Ct={class:"item-name"},Pt={class:"item-spec"},Vt={key:0},Ft={class:"item-price"},Tt={class:"item-actions"},St={class:"item-subtotal"},Nt={class:"products-container"},qt={key:0,class:"loading-state"},It={key:1,class:"empty-state"},Dt={class:"empty-subtitle"},Mt={key:2,class:"product-grid"},zt=["onClick"],Ut={class:"card-image-wrapper"},At=["src"],Et={key:0,class:"selection-badge"},Bt={class:"badge-text"},Ot=["onClick"],Rt={class:"price-tag"},Wt={class:"price-text"},Qt={class:"card-info"},jt={class:"product-name"},Lt={class:"product-model"},Ht={class:"product-meta"},Jt={class:"product-unit"},Kt={key:0,class:"product-stock"},Yt={key:3,class:"load-more"},Zt={class:"step-actions"},Gt={key:0,class:"action-count"},Xt={key:0,class:"sku-modal"},es={class:"sku-product"},ts=["src"],ss={class:"sku-info"},os={class:"sku-name"},ls={class:"sku-model"},as={class:"sku-base-price"},is={key:0,class:"sku-options"},ns={class:"option-grid"},rs=["onClick"],us={class:"option-name"},cs={key:0,class:"option-price"},ds={class:"quantity-section"},ms={class:"quantity-controls"},vs={class:"price-preview"},ps={class:"preview-price"},fs={class:"sku-actions"},gs=ie({__name:"StepProducts",props:{selectedProducts:{},categories:{},maxSelection:{}},emits:["update:selectedProducts","next","back"],setup(ee,{emit:k}){const c=ee,U=k,s=T(""),P=T("all"),v=T(!1),w=T(!0),I=T(1),E=T(!1),F=T([...c.selectedProducts]),M=T([]),Q=T(),b=T(null),z=T(""),q=T(1),D=T(-1),B=d=>{const n=[],A={tables:["æ˜Ÿç‰Œå°çƒæ¡Œ","ä¹”æ°å°çƒæ¡Œ","äºšæ—å°çƒæ¡Œ","åº·æºªå°çƒæ¡Œ"],cues:["é«˜ç«¯æ«æœ¨çƒæ†","ä¸“ä¸šç¢³çº¤ç»´çƒæ†","åˆå­¦è€…å¥—è£…çƒæ†","å®šåˆ¶é›•èŠ±çƒæ†"],balls:["äºšç¾åˆ©åŠ å°çƒ","æ¯”åˆ©æ—¶aramithçƒ","å›½äº§ä¼˜è´¨å°çƒ","ç»ƒä¹ ä¸“ç”¨çƒ"],accessories:["å°çƒä¸‰è§’æ¶","çƒæ†æ¶","å°çƒåˆ·","çƒæ†çš®å¤´"],maintenance:["å°å‘¢æ¸…æ´å‰‚","çƒæ†ä¿å…»æ²¹","å°çƒæ¡Œç½©","ä¸“ä¸šç»´ä¿®å·¥å…·"]};return(d==="all"?Object.keys(A):[d||"tables"]).forEach(m=>{var N;(N=A[m])==null||N.forEach((fe,ue)=>{n.push({id:`${m}-${ue}`,name:fe,model:`${m.toUpperCase()}-${Math.random().toString(36).substring(7)}`,price:Math.floor(Math.random()*5e3)+500,unit:m==="tables"?"å¼ ":m==="cues"?"æ”¯":"ä¸ª",categoryId:m,stock:Math.floor(Math.random()*50)+10,image:`/static/images/products/${m}-${ue+1}.jpg`,skuOptions:Math.random()>.6?[{id:`${m}-${ue}-sku1`,name:"æ ‡å‡†ç‰ˆ",price:0},{id:`${m}-${ue}-sku2`,name:"è±ªåç‰ˆ",price:200},{id:`${m}-${ue}-sku3`,name:"å®šåˆ¶ç‰ˆ",price:500}]:void 0})})}),n},R=$(()=>{let d=M.value;if(P.value!=="all"&&(d=d.filter(n=>n.categoryId===P.value)),s.value){const n=s.value.toLowerCase();d=d.filter(A=>{var W;return A.name.toLowerCase().includes(n)||((W=A.model)==null?void 0:W.toLowerCase().includes(n))})}return d}),j=$(()=>F.value.reduce((d,n)=>d+n.subtotal,0)),L=$(()=>{var W,m;if(!b.value)return 0;const d=b.value.price,n=((m=(W=b.value.skuOptions)==null?void 0:W.find(N=>N.id===z.value))==null?void 0:m.price)||0;return(d+n)*q.value}),J=async()=>{if(v.value)return;v.value=!0,await new Promise(n=>setTimeout(n,500));const d=B(P.value);I.value===1?M.value=d:M.value=[...M.value,...d],w.value=I.value<3,v.value=!1},Z=()=>{clearTimeout(Z.timer),Z.timer=setTimeout(()=>{f()},300)},G=()=>{s.value="",f()},H=d=>{P.value=d,f()},f=()=>{I.value=1,M.value=[],J()},g=()=>{!v.value&&w.value&&(I.value++,J())},i=d=>F.value.some(n=>n.product.id===d),t=d=>c.maxSelection&&!i(d)&&F.value.length>=c.maxSelection,u=d=>{const n=F.value.find(A=>A.product.id===d);return(n==null?void 0:n.quantity)||0},h=d=>{var A;if(t(d.id)){uni.showToast({title:`æœ€å¤šé€‰æ‹©${c.maxSelection}ç§äº§å“`,icon:"none"});return}if((A=d.skuOptions)!=null&&A.length){le(d);return}const n={product:d,quantity:1,price:d.price,subtotal:d.price};F.value.push(n),l(),uni.showToast({title:"å·²æ·»åŠ åˆ°é€‰æ‹©",icon:"success",duration:1e3})},le=d=>{var A,W,m;if(t(d.id)){uni.showToast({title:`æœ€å¤šé€‰æ‹©${c.maxSelection}ç§äº§å“`,icon:"none"});return}b.value=d;const n=F.value.findIndex(N=>N.product.id===d.id);if(n!==-1){D.value=n;const N=F.value[n];q.value=N.quantity,z.value=N.skuId||""}else D.value=-1,q.value=1,z.value=((W=(A=d.skuOptions)==null?void 0:A[0])==null?void 0:W.id)||"";(m=Q.value)==null||m.open()},de=d=>{z.value=d.id},ce=()=>{q.value++},me=()=>{q.value>1&&q.value--},O=()=>{(q.value<1||isNaN(q.value))&&(q.value=1)},ve=()=>{var W;if(!b.value)return;const d=(W=b.value.skuOptions)==null?void 0:W.find(m=>m.id===z.value),n=b.value.price+((d==null?void 0:d.price)||0),A={product:b.value,quantity:q.value,skuId:z.value||void 0,skuName:(d==null?void 0:d.name)||void 0,price:n,subtotal:n*q.value};D.value!==-1?F.value[D.value]=A:F.value.push(A),l(),x(),uni.showToast({title:D.value!==-1?"å·²æ›´æ–°é€‰æ‹©":"å·²æ·»åŠ åˆ°é€‰æ‹©",icon:"success"})},pe=d=>{F.value.splice(d,1),l()},x=()=>{var d;(d=Q.value)==null||d.close(),b.value=null,D.value=-1},l=()=>{U("update:selectedProducts",[...F.value])},X=()=>{U("back")},C=()=>{if(F.value.length===0){uni.showToast({title:"è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªäº§å“",icon:"none"});return}U("next")};return xe(()=>c.selectedProducts,d=>{F.value=[...d]},{deep:!0}),we(()=>{J()}),(d,n)=>{const A=ke("scroll-view"),W=ke("uni-popup");return a(),r("view",rt,[e("view",ut,[n[5]||(n[5]=e("text",{class:"step-title"},"é€‰æ‹©äº§å“",-1)),e("text",ct,[n[4]||(n[4]=V(" æµè§ˆäº§å“ç›®å½•ï¼Œç‚¹å‡»äº§å“å¡ç‰‡è¿›è¡Œé€‰æ‹© ",-1)),d.maxSelection?(a(),r("text",dt," (æœ€å¤š"+o(d.maxSelection)+"ç§)",1)):p("",!0)])]),e("view",mt,[e("view",vt,[n[7]||(n[7]=e("text",{class:"search-icon"},"ğŸ”",-1)),he(e("input",{"onUpdate:modelValue":n[0]||(n[0]=m=>s.value=m),class:"search-input",placeholder:"æœç´¢äº§å“åç§°ã€å‹å·",onInput:Z},null,544),[[be,s.value]]),s.value?(a(),r("view",{key:0,class:"clear-search",onClick:G},n[6]||(n[6]=[e("text",null,"Ã—",-1)]))):p("",!0)]),_(A,{class:"filter-chips","scroll-x":"","show-scrollbar":!1},{default:y(()=>[e("view",pt,[e("view",{class:Y(["filter-chip",{"filter-chip--active":P.value==="all"}]),onClick:n[1]||(n[1]=m=>H("all"))}," å…¨éƒ¨ ",2),(a(!0),r(se,null,oe(d.categories,m=>(a(),r("view",{key:m.id,class:Y(["filter-chip",{"filter-chip--active":P.value===m.id}]),onClick:N=>H(m.id)},[e("text",gt,o(m.icon),1),e("text",_t,o(m.name),1)],10,ft))),128))])]),_:1})]),F.value.length>0?(a(),r("view",yt,[e("view",{class:"summary-header",onClick:n[2]||(n[2]=m=>E.value=!E.value)},[e("text",wt," å·²é€‰ "+o(F.value.length)+" ç§äº§å“ ",1),e("text",xt," åˆè®¡ï¼šÂ¥"+o(j.value.toFixed(2)),1),e("text",ht,o(E.value?"â–²":"â–¼"),1)]),E.value?(a(),r("view",bt,[(a(!0),r(se,null,oe(F.value,(m,N)=>(a(),r("view",{key:`${m.product.id}-${m.skuId}`,class:"selected-item"},[e("image",{class:"item-image",src:m.product.image||"/static/images/default-product.png",mode:"aspectFill"},null,8,kt),e("view",$t,[e("text",Ct,o(m.product.name),1),e("text",Pt,[V(o(m.product.model)+" ",1),m.skuName?(a(),r("text",Vt," - "+o(m.skuName),1)):p("",!0)]),e("text",Ft,"Â¥"+o(m.price)+" Ã— "+o(m.quantity),1)]),e("view",Tt,[e("text",St,"Â¥"+o(m.subtotal.toFixed(2)),1),_(S,{size:"mini",type:"danger",onClick:fe=>pe(N)},{default:y(()=>n[8]||(n[8]=[V(" ç§»é™¤ ",-1)])),_:2,__:[8]},1032,["onClick"])])]))),128))])):p("",!0)])):p("",!0),e("view",Nt,[v.value?(a(),r("view",qt,n[9]||(n[9]=[e("view",{class:"loading-spinner"},null,-1),e("text",{class:"loading-text"},"åŠ è½½äº§å“ä¸­...",-1)]))):R.value.length===0?(a(),r("view",It,[n[11]||(n[11]=e("text",{class:"empty-icon"},"ğŸ“¦",-1)),n[12]||(n[12]=e("text",{class:"empty-title"},"æ²¡æœ‰æ‰¾åˆ°äº§å“",-1)),e("text",Dt,o(s.value?"å°è¯•å…¶ä»–æœç´¢å…³é”®è¯":"è¯¥åˆ†ç±»æš‚æ— äº§å“"),1),s.value?(a(),te(S,{key:0,type:"plain",onClick:G,size:"small"},{default:y(()=>n[10]||(n[10]=[V(" æ¸…é™¤æœç´¢æ¡ä»¶ ",-1)])),_:1,__:[10]})):p("",!0)])):(a(),r("view",Mt,[(a(!0),r(se,null,oe(R.value,m=>(a(),r("view",{key:m.id,class:Y(["product-card",{"product-card--selected":i(m.id),"product-card--disabled":t(m.id)}]),onClick:N=>le(m)},[e("view",Ut,[e("image",{class:"card-image",src:m.image||"/static/images/default-product.png",mode:"aspectFill","lazy-load":""},null,8,At),i(m.id)?(a(),r("view",Et,[e("text",Bt,o(u(m.id)),1)])):(a(),r("view",{key:1,class:"quick-add-btn",onClick:Te(N=>h(m),["stop"])},n[13]||(n[13]=[e("text",{class:"add-icon"},"+",-1)]),8,Ot)),e("view",Rt,[e("text",Wt,"Â¥"+o(m.price),1)])]),e("view",Qt,[e("text",jt,o(m.name),1),e("text",Lt,o(m.model),1),e("view",Ht,[e("text",Jt,o(m.unit||"ä¸ª"),1),m.stock?(a(),r("text",Kt," åº“å­˜: "+o(m.stock),1)):p("",!0)])])],10,zt))),128))])),w.value&&!v.value?(a(),r("view",Yt,[_(S,{type:"plain",onClick:g},{default:y(()=>n[14]||(n[14]=[V(" åŠ è½½æ›´å¤šäº§å“ ",-1)])),_:1,__:[14]})])):p("",!0)]),e("view",Zt,[_(S,{type:"default",onClick:X},{default:y(()=>n[15]||(n[15]=[V(" ä¸Šä¸€æ­¥ ",-1)])),_:1,__:[15]}),_(S,{type:"primary",onClick:C,disabled:F.value.length===0,class:"next-button"},{default:y(()=>[n[16]||(n[16]=V(" ä¸‹ä¸€æ­¥ï¼šä»·æ ¼é…ç½® ",-1)),F.value.length>0?(a(),r("text",Gt," ("+o(F.value.length)+") ",1)):p("",!0)]),_:1,__:[16]},8,["disabled"])]),_(W,{ref_key:"skuModalRef",ref:Q,type:"bottom","mask-click":!1},{default:y(()=>{var m;return[b.value?(a(),r("view",Xt,[e("view",{class:"sku-header"},[n[18]||(n[18]=e("text",{class:"sku-title"},"é€‰æ‹©è§„æ ¼",-1)),e("view",{class:"sku-close",onClick:x},n[17]||(n[17]=[e("text",null,"Ã—",-1)]))]),e("view",es,[e("image",{class:"sku-image",src:b.value.image||"/static/images/default-product.png",mode:"aspectFill"},null,8,ts),e("view",ss,[e("text",os,o(b.value.name),1),e("text",ls,o(b.value.model),1),e("text",as,"åŸºç¡€ä»·æ ¼ï¼šÂ¥"+o(b.value.price),1)])]),(m=b.value.skuOptions)!=null&&m.length?(a(),r("view",is,[n[19]||(n[19]=e("text",{class:"option-label"},"è§„æ ¼é€‰æ‹©",-1)),e("view",ns,[(a(!0),r(se,null,oe(b.value.skuOptions,N=>(a(),r("view",{key:N.id,class:Y(["option-item",{"option-item--selected":z.value===N.id}]),onClick:fe=>de(N)},[e("text",us,o(N.name),1),N.price?(a(),r("text",cs,o(N.price>0?"+":"")+"Â¥"+o(N.price),1)):p("",!0)],10,rs))),128))])])):p("",!0),e("view",ds,[n[22]||(n[22]=e("text",{class:"quantity-label"},"æ•°é‡",-1)),e("view",ms,[_(S,{size:"small",type:"default",onClick:me,disabled:q.value<=1},{default:y(()=>n[20]||(n[20]=[V(" - ",-1)])),_:1,__:[20]},8,["disabled"]),he(e("input",{"onUpdate:modelValue":n[3]||(n[3]=N=>q.value=N),type:"number",class:"quantity-input",min:"1",onBlur:O},null,544),[[be,q.value,void 0,{number:!0}]]),_(S,{size:"small",type:"default",onClick:ce},{default:y(()=>n[21]||(n[21]=[V(" + ",-1)])),_:1,__:[21]})])]),e("view",vs,[n[23]||(n[23]=e("text",{class:"preview-label"},"å°è®¡ï¼š",-1)),e("text",ps,"Â¥"+o(L.value.toFixed(2)),1)]),e("view",fs,[_(S,{type:"default",onClick:x},{default:y(()=>n[24]||(n[24]=[V(" å–æ¶ˆ ",-1)])),_:1,__:[24]}),_(S,{type:"primary",onClick:ve},{default:y(()=>n[25]||(n[25]=[V(" ç¡®è®¤æ·»åŠ  ",-1)])),_:1,__:[25]})])])):p("",!0)]}),_:1},512)])}}}),_s=ne(gs,[["__scopeId","data-v-49612eb6"]]),ys={class:"step-pricing"},ws={class:"price-calculator"},xs={class:"calculator-header"},hs={class:"toggle-text"},bs={class:"toggle-icon"},ks={key:0,class:"calculator-content"},$s={class:"price-row"},Cs={class:"row-label"},Ps={class:"row-value"},Vs={key:0,class:"price-row discount-row"},Fs={class:"row-label"},Ts={class:"row-value discount-value"},Ss={key:1,class:"price-row discount-row"},Ns={class:"row-value discount-value"},qs={class:"price-row subtotal-row"},Is={class:"row-value"},Ds={key:2,class:"price-row"},Ms={class:"row-value"},zs={key:3,class:"price-row"},Us={class:"row-label"},As={class:"row-value"},Es={class:"price-row total-row"},Bs={class:"row-value total-value"},Os={class:"config-section"},Rs={class:"discount-type-selector"},Ws={class:"discount-input-section"},Qs={class:"input-unit"},js={key:0,class:"discount-preview"},Ls={class:"discount-presets"},Hs={class:"preset-buttons"},Js={class:"config-section"},Ks={class:"section-toggle"},Ys={key:0,class:"advanced-content"},Zs={class:"config-subsection"},Gs={class:"form-row"},Xs={key:0,class:"checkbox-check"},eo={class:"config-subsection"},to={class:"form-grid"},so={key:0,class:"other-charges"},oo={class:"charge-controls"},lo={class:"charge-type-toggle"},ao={class:"config-subsection"},io={class:"form-grid"},no={class:"validity-hint"},ro={class:"price-impact"},uo={class:"impact-chart"},co={class:"chart-bar"},mo={class:"bar-segment original",style:{width:"100%"}},vo={class:"segment-value"},po={class:"segment-value"},fo={class:"final-price"},go={class:"final-value"},_o={key:0,class:"savings-badge"},yo={class:"step-actions"},wo=ie({__name:"StepPricing",props:{config:{},selectedProducts:{},customerType:{}},emits:["update:config","update:validityDays","update:paymentTerms","next","back"],setup(ee,{emit:k}){const c=ee,U=k,s=re({...c.config}),P=T(!0),v=T(!1),w=T(""),I=T(30),E=T("immediate"),F=[{value:"immediate",label:"ç«‹å³ä»˜æ¬¾"},{value:"30days",label:"30å¤©è´¦æœŸ"},{value:"60days",label:"60å¤©è´¦æœŸ"},{value:"cod",label:"è´§åˆ°ä»˜æ¬¾"}],M={individual:{discount:0,name:"ä¸ªäººå®¢æˆ·"},company:{discount:.05,name:"ä¼ä¸šå®¢æˆ·"},dealer:{discount:.1,name:"ç»é”€å•†"},club:{discount:.08,name:"ä¿±ä¹éƒ¨"}},Q=$(()=>s.discountType==="percentage"?[{label:"5%",value:5},{label:"10%",value:10},{label:"15%",value:15},{label:"20%",value:20}]:[100,200,500,1e3].map(l=>({label:`Â¥${l}`,value:l}))),b=$(()=>c.selectedProducts.reduce((x,l)=>x+l.subtotal,0)),z=$(()=>{const x=M[c.customerType];return b.value*x.discount}),q=$(()=>M[c.customerType].name),D=$(()=>s.discountType==="percentage"?b.value*(s.discountValue/100):Math.min(s.discountValue,b.value)),B=$(()=>z.value+D.value),R=$(()=>Math.max(0,b.value-B.value)),j=$(()=>{var l;let x=s.deliveryFee+s.installationFee;return(l=s.otherCharges)==null||l.forEach(X=>{X.type==="percentage"?x+=R.value*(X.amount/100):x+=X.amount||0}),x}),L=$(()=>s.taxIncluded?0:(R.value+j.value)*(s.taxRate/100)),J=$(()=>R.value+j.value+L.value),Z=$(()=>s.discountType==="percentage"?"æŠ˜æ‰£æ¯”ä¾‹":"æŠ˜æ‰£é‡‘é¢"),G=$(()=>s.discountType==="percentage"?"è¾“å…¥0-50":"è¾“å…¥æŠ˜æ‰£é‡‘é¢"),H=$(()=>s.discountType==="percentage"?"%":"Â¥"),f=$(()=>s.discountType==="percentage"?50:b.value),g=x=>{s.discountType=x,s.discountValue=0,w.value="",O()},i=x=>{s.discountValue=x||0,w.value="",O()},t=()=>{const x=s.discountValue;s.discountType==="percentage"?(x<0||x>50)&&(w.value="æŠ˜æ‰£æ¯”ä¾‹åº”åœ¨0-50%ä¹‹é—´",s.discountValue=Math.max(0,Math.min(50,x))):(x>b.value&&(w.value="æŠ˜æ‰£é‡‘é¢ä¸èƒ½è¶…è¿‡å°è®¡",s.discountValue=b.value),x<0&&(s.discountValue=0)),O()},u=x=>{s.discountValue=x.value,w.value="",O(),uni.showToast({title:`å·²åº”ç”¨${x.label}æŠ˜æ‰£`,icon:"success",duration:1e3})},h=()=>{s.taxIncluded=!s.taxIncluded,O()},le=()=>{s.otherCharges||(s.otherCharges=[]),s.otherCharges.push({id:Date.now().toString(),name:"",amount:0,type:"fixed"}),O()},de=x=>{var l;(l=s.otherCharges)==null||l.splice(x,1),O()},ce=(x,l)=>{var X;(X=s.otherCharges)!=null&&X[x]&&(s.otherCharges[x].type=l,O())},me=()=>{const x=new Date;return x.setDate(x.getDate()+I.value),x.toLocaleDateString("zh-CN")},O=()=>{U("update:config",{...s})},ve=()=>{U("back")},pe=()=>{t(),w.value||U("next")};return xe(()=>c.config,x=>{Object.assign(s,x)},{deep:!0}),(x,l)=>{var X;return a(),r("view",ys,[l[39]||(l[39]=e("view",{class:"step-header"},[e("text",{class:"step-title"},"ä»·æ ¼é…ç½®"),e("text",{class:"step-subtitle"},"è®¾ç½®æŠ˜æ‰£ã€ç¨è´¹å’Œé™„åŠ æœåŠ¡ï¼Œå®æ—¶æŸ¥çœ‹ä»·æ ¼å˜åŒ–")],-1)),e("view",ws,[e("view",xs,[l[12]||(l[12]=e("text",{class:"calc-title"},"ğŸ’° ä»·æ ¼æ˜ç»†",-1)),e("view",{class:"calc-toggle",onClick:l[0]||(l[0]=C=>P.value=!P.value)},[e("text",hs,o(P.value?"æ”¶èµ·":"å±•å¼€"),1),e("text",bs,o(P.value?"â–²":"â–¼"),1)])]),P.value?(a(),r("view",ks,[e("view",$s,[e("text",Cs,"äº§å“å°è®¡ ("+o(x.selectedProducts.length)+"ç§)",1),e("text",Ps,"Â¥"+o(b.value.toFixed(2)),1)]),z.value>0?(a(),r("view",Vs,[e("text",Fs,o(q.value)+"ä¼˜æƒ ",1),e("text",Ts,"-Â¥"+o(z.value.toFixed(2)),1)])):p("",!0),D.value>0?(a(),r("view",Ss,[l[13]||(l[13]=e("text",{class:"row-label"},"é¢å¤–æŠ˜æ‰£",-1)),e("text",Ns,"-Â¥"+o(D.value.toFixed(2)),1)])):p("",!0),e("view",qs,[l[14]||(l[14]=e("text",{class:"row-label"},"æŠ˜æ‰£åå°è®¡",-1)),e("text",Is,"Â¥"+o(R.value.toFixed(2)),1)]),j.value>0?(a(),r("view",Ds,[l[15]||(l[15]=e("text",{class:"row-label"},"é™„åŠ è´¹ç”¨",-1)),e("text",Ms,"+Â¥"+o(j.value.toFixed(2)),1)])):p("",!0),L.value>0?(a(),r("view",zs,[e("text",Us,"ç¨è´¹ ("+o(s.taxRate)+"%)",1),e("text",As,"+Â¥"+o(L.value.toFixed(2)),1)])):p("",!0),e("view",Es,[l[16]||(l[16]=e("text",{class:"row-label"},"åˆè®¡é‡‘é¢",-1)),e("text",Bs,"Â¥"+o(J.value.toFixed(2)),1)])])):p("",!0)]),e("view",Os,[l[20]||(l[20]=e("view",{class:"section-header"},[e("text",{class:"section-icon"},"ğŸ«"),e("text",{class:"section-title"},"æŠ˜æ‰£è®¾ç½®")],-1)),e("view",Rs,[e("view",{class:Y(["type-option",{"type-option--active":s.discountType==="percentage"}]),onClick:l[1]||(l[1]=C=>g("percentage"))},l[17]||(l[17]=[e("text",{class:"option-icon"},"%",-1),e("text",{class:"option-label"},"æŒ‰æ¯”ä¾‹",-1),e("text",{class:"option-hint"},"0-50%",-1)]),2),e("view",{class:Y(["type-option",{"type-option--active":s.discountType==="fixed"}]),onClick:l[2]||(l[2]=C=>g("fixed"))},l[18]||(l[18]=[e("text",{class:"option-icon"},"Â¥",-1),e("text",{class:"option-label"},"å›ºå®šé‡‘é¢",-1),e("text",{class:"option-hint"},"å…·ä½“é‡‘é¢",-1)]),2)]),e("view",Ws,[_(K,{modelValue:s.discountValue,"onUpdate:modelValue":l[3]||(l[3]=C=>s.discountValue=C),modelModifiers:{number:!0},label:Z.value,placeholder:G.value,type:"number",min:0,max:f.value,error:w.value,onInput:i,onBlur:t},{suffix:y(()=>[e("text",Qs,o(H.value),1)]),help:y(()=>[D.value>0?(a(),r("text",js," èŠ‚çœ Â¥"+o(D.value.toFixed(2)),1)):p("",!0)]),_:1},8,["modelValue","label","placeholder","max","error"]),e("view",Ls,[l[19]||(l[19]=e("text",{class:"presets-label"},"å¿«é€Ÿé€‰æ‹©ï¼š",-1)),e("view",Hs,[(a(!0),r(se,null,oe(Q.value,C=>(a(),te(S,{key:C.value,size:"mini",type:"plain",onClick:d=>u(C)},{default:y(()=>[V(o(C.label),1)]),_:2},1032,["onClick"]))),128))])])])]),e("view",Js,[e("view",{class:"section-header",onClick:l[4]||(l[4]=C=>v.value=!v.value)},[l[21]||(l[21]=e("text",{class:"section-icon"},"âš™ï¸",-1)),l[22]||(l[22]=e("text",{class:"section-title"},"é«˜çº§è®¾ç½®",-1)),e("text",Ks,o(v.value?"â–²":"â–¼"),1)]),v.value?(a(),r("view",Ys,[e("view",Zs,[l[24]||(l[24]=e("text",{class:"subsection-title"},"ç¨è´¹é…ç½®",-1)),e("view",Gs,[_(K,{modelValue:s.taxRate,"onUpdate:modelValue":l[5]||(l[5]=C=>s.taxRate=C),modelModifiers:{number:!0},label:"ç¨ç‡ (%)",placeholder:"13",type:"number",min:0,max:30,onInput:O},null,8,["modelValue"]),e("view",{class:"tax-included-option",onClick:h},[e("view",{class:Y(["checkbox",{"checkbox--checked":s.taxIncluded}])},[s.taxIncluded?(a(),r("text",Xs,"âœ“")):p("",!0)],2),l[23]||(l[23]=e("text",{class:"checkbox-label"},"å«ç¨ä»·æ ¼",-1))])])]),e("view",eo,[l[31]||(l[31]=e("text",{class:"subsection-title"},"é™„åŠ è´¹ç”¨",-1)),e("view",to,[_(K,{modelValue:s.deliveryFee,"onUpdate:modelValue":l[6]||(l[6]=C=>s.deliveryFee=C),modelModifiers:{number:!0},label:"é…é€è´¹ (Â¥)",placeholder:"0",type:"number",min:0,onInput:O},{prefix:y(()=>l[25]||(l[25]=[e("text",{class:"input-icon"},"ğŸšš",-1)])),_:1},8,["modelValue"]),_(K,{modelValue:s.installationFee,"onUpdate:modelValue":l[7]||(l[7]=C=>s.installationFee=C),modelModifiers:{number:!0},label:"å®‰è£…è´¹ (Â¥)",placeholder:"0",type:"number",min:0,onInput:O},{prefix:y(()=>l[26]||(l[26]=[e("text",{class:"input-icon"},"ğŸ”§",-1)])),_:1},8,["modelValue"])]),(X=s.otherCharges)!=null&&X.length?(a(),r("view",so,[(a(!0),r(se,null,oe(s.otherCharges,(C,d)=>(a(),r("view",{key:C.id,class:"charge-item"},[_(K,{modelValue:C.name,"onUpdate:modelValue":n=>C.name=n,placeholder:"è´¹ç”¨åç§°",onInput:O,class:"charge-name"},null,8,["modelValue","onUpdate:modelValue"]),e("view",oo,[e("view",lo,[_(S,{type:C.type==="fixed"?"primary":"default",size:"mini",onClick:n=>ce(d,"fixed")},{default:y(()=>l[27]||(l[27]=[V(" å›ºå®š ",-1)])),_:2,__:[27]},1032,["type","onClick"]),_(S,{type:C.type==="percentage"?"primary":"default",size:"mini",onClick:n=>ce(d,"percentage")},{default:y(()=>l[28]||(l[28]=[V(" æ¯”ä¾‹ ",-1)])),_:2,__:[28]},1032,["type","onClick"])]),_(K,{modelValue:C.amount,"onUpdate:modelValue":n=>C.amount=n,modelModifiers:{number:!0},placeholder:C.type==="percentage"?"ç™¾åˆ†æ¯”":"é‡‘é¢",type:"number",min:0,onInput:O,class:"charge-amount"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),_(S,{size:"mini",type:"danger",onClick:n=>de(d)},{default:y(()=>l[29]||(l[29]=[V(" åˆ é™¤ ",-1)])),_:2,__:[29]},1032,["onClick"])])]))),128))])):p("",!0),_(S,{type:"plain",size:"small",onClick:le},{default:y(()=>l[30]||(l[30]=[V(" + æ·»åŠ å…¶ä»–è´¹ç”¨ ",-1)])),_:1,__:[30]})]),e("view",ao,[l[32]||(l[32]=e("text",{class:"subsection-title"},"æŠ¥ä»·ä¿¡æ¯",-1)),e("view",io,[_(K,{modelValue:I.value,"onUpdate:modelValue":l[8]||(l[8]=C=>I.value=C),modelModifiers:{number:!0},label:"æœ‰æ•ˆæœŸ (å¤©)",placeholder:"30",type:"number",min:1,max:365,onInput:l[9]||(l[9]=C=>x.$emit("update:validityDays",I.value))},{help:y(()=>[e("text",no," æœ‰æ•ˆè‡³ï¼š"+o(me()),1)]),_:1},8,["modelValue"]),_(ye,{modelValue:E.value,"onUpdate:modelValue":l[10]||(l[10]=C=>E.value=C),label:"ä»˜æ¬¾æ¡ä»¶",options:F,onChange:l[11]||(l[11]=C=>x.$emit("update:paymentTerms",E.value))},null,8,["modelValue"])])])])):p("",!0)]),e("view",ro,[l[36]||(l[36]=e("text",{class:"impact-title"},"ä»·æ ¼å½±å“åˆ†æ",-1)),e("view",uo,[e("view",co,[e("view",mo,[l[33]||(l[33]=e("text",{class:"segment-label"},"åŸä»·",-1)),e("text",vo,"Â¥"+o(b.value.toFixed(2)),1)]),B.value>0?(a(),r("view",{key:0,class:"bar-segment discount",style:Ce({width:`${B.value/b.value*100}%`})},[l[34]||(l[34]=e("text",{class:"segment-label"},"ä¼˜æƒ ",-1)),e("text",po,"-Â¥"+o(B.value.toFixed(2)),1)],4)):p("",!0)]),e("view",fo,[l[35]||(l[35]=e("text",{class:"final-label"},"æœ€ç»ˆä»·æ ¼",-1)),e("text",go,"Â¥"+o(J.value.toFixed(2)),1),B.value>0?(a(),r("text",_o," çœÂ¥"+o(B.value.toFixed(2)),1)):p("",!0)])])]),e("view",yo,[_(S,{type:"default",onClick:ve},{default:y(()=>l[37]||(l[37]=[V(" ä¸Šä¸€æ­¥ ",-1)])),_:1,__:[37]}),_(S,{type:"primary",onClick:pe,class:"next-button"},{default:y(()=>l[38]||(l[38]=[V(" ä¸‹ä¸€æ­¥ï¼šç¡®è®¤æäº¤ ",-1)])),_:1,__:[38]})])])}}}),xo=ne(wo,[["__scopeId","data-v-b6585cd7"]]),ho={class:"step-review"},bo={class:"quote-header"},ko={class:"quote-number"},$o={class:"number-value"},Co={class:"quote-meta"},Po={class:"meta-item"},Vo={class:"meta-item"},Fo={class:"review-section"},To={class:"section-header"},So={class:"info-grid"},No={class:"info-item"},qo={class:"info-value"},Io={class:"info-item"},Do={class:"info-value"},Mo={key:0,class:"info-item"},zo={class:"info-value"},Uo={key:1,class:"info-item"},Ao={class:"info-value"},Eo={class:"info-item"},Bo={class:"customer-type-badge"},Oo={class:"badge-text"},Ro={key:0,class:"badge-discount"},Wo={key:0,class:"address-section"},Qo={class:"info-value"},jo={key:1,class:"remarks-section"},Lo={class:"info-value"},Ho={class:"review-section"},Jo={class:"section-header"},Ko={class:"section-title"},Yo={class:"products-list"},Zo=["src"],Go={class:"product-details"},Xo={class:"product-name"},el={class:"product-spec"},tl={key:0},sl={class:"product-pricing"},ol={class:"unit-price"},ll={class:"quantity"},al={class:"subtotal"},il={class:"review-section"},nl={class:"section-header"},rl={class:"pricing-breakdown"},ul={class:"breakdown-group"},cl={class:"breakdown-item"},dl={class:"item-value"},ml={key:0,class:"breakdown-group discount-group"},vl={key:0,class:"breakdown-item"},pl={class:"item-label"},fl={class:"item-value discount-value"},gl={key:1,class:"breakdown-item"},_l={class:"item-label"},yl={class:"item-value discount-value"},wl={class:"breakdown-item subtotal-item"},xl={class:"item-value"},hl={key:1,class:"breakdown-group"},bl={key:0,class:"breakdown-item"},kl={class:"item-value"},$l={key:1,class:"breakdown-item"},Cl={class:"item-value"},Pl={class:"item-label"},Vl={class:"item-value"},Fl={key:2,class:"breakdown-group"},Tl={class:"breakdown-item"},Sl={class:"item-label"},Nl={class:"item-value"},ql={class:"breakdown-group total-group"},Il={class:"breakdown-item total-item"},Dl={class:"item-value total-value"},Ml={key:0,class:"savings-summary"},zl={class:"savings-text"},Ul={class:"review-section"},Al={class:"terms-list"},El={class:"term-item"},Bl={class:"term-value"},Ol={class:"term-item"},Rl={class:"term-value"},Wl={key:0,class:"term-item"},Ql={key:0,class:"review-section"},jl={class:"special-terms"},Ll={class:"terms-text"},Hl={class:"review-actions"},Jl={class:"action-summary"},Kl={class:"final-total"},Yl={class:"total-amount"},Zl={class:"action-buttons"},Gl={key:1,class:"success-overlay"},Xl=ie({__name:"StepReview",props:{customerForm:{},selectedProducts:{},pricingConfig:{},quoteMetadata:{},totalPrice:{},submitting:{type:Boolean}},emits:["submit","back"],setup(ee,{emit:k}){const c=ee,U=k,s=T(!1),P={individual:{discount:0,name:"ä¸ªäººå®¢æˆ·"},company:{discount:.05,name:"ä¼ä¸šå®¢æˆ·"},dealer:{discount:.1,name:"ç»é”€å•†"},club:{discount:.08,name:"ä¿±ä¹éƒ¨"}},v={immediate:"ç«‹å³ä»˜æ¬¾","30days":"30å¤©è´¦æœŸ","60days":"60å¤©è´¦æœŸ",cod:"è´§åˆ°ä»˜æ¬¾"},w=$(()=>c.selectedProducts.reduce((i,t)=>i+t.subtotal,0)),I=$(()=>{const i=P[c.customerForm.customerType];return w.value*i.discount}),E=$(()=>c.pricingConfig.discountType==="percentage"?w.value*(c.pricingConfig.discountValue/100):Math.min(c.pricingConfig.discountValue,w.value)),F=$(()=>I.value+E.value),M=$(()=>Math.max(0,w.value-F.value)),Q=$(()=>{var t;let i=c.pricingConfig.deliveryFee+c.pricingConfig.installationFee;return(t=c.pricingConfig.otherCharges)==null||t.forEach(u=>{i+=G(u)}),i}),b=$(()=>c.pricingConfig.taxIncluded?0:(M.value+Q.value)*(c.pricingConfig.taxRate/100)),z=$(()=>I.value>0||E.value>0),q=$(()=>Q.value>0),D=$(()=>F.value),B=i=>i.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}),R=i=>i.length===11?i.replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3"):i,j=i=>{var t;return((t=P[i])==null?void 0:t.name)||"ä¸ªäººå®¢æˆ·"},L=i=>{var t;return(((t=P[i])==null?void 0:t.discount)||0)*100},J=()=>{const i=new Date;return i.setDate(i.getDate()+c.quoteMetadata.validityDays),i.toLocaleDateString("zh-CN")},Z=i=>v[i]||"ç«‹å³ä»˜æ¬¾",G=i=>i.type==="percentage"?M.value*(i.amount/100):i.amount||0,H=i=>{uni.showModal({title:"è¿”å›ä¿®æ”¹",content:`ç¡®å®šè¦è¿”å›ç¬¬${i}æ­¥è¿›è¡Œä¿®æ”¹å—ï¼Ÿ`,success:t=>{t.confirm&&U("back")}})},f=()=>{U("back")},g=()=>{s.value=!0,U("submit")};return(i,t)=>(a(),r("view",ho,[t[39]||(t[39]=e("view",{class:"step-header"},[e("text",{class:"step-title"},"ç¡®è®¤æŠ¥ä»·"),e("text",{class:"step-subtitle"},"è¯·ä»”ç»†æ ¸å¯¹ä»¥ä¸‹ä¿¡æ¯ï¼Œç¡®è®¤æ— è¯¯åæäº¤æŠ¥ä»·")],-1)),e("view",bo,[e("view",ko,[t[3]||(t[3]=e("text",{class:"number-label"},"æŠ¥ä»·ç¼–å·",-1)),e("text",$o,o(i.quoteMetadata.quoteNumber),1)]),e("view",Co,[e("text",Po,"æœ‰æ•ˆæœŸ: "+o(i.quoteMetadata.validityDays)+"å¤©",1),e("text",Vo,"åˆ›å»ºæ—¶é—´: "+o(B(new Date)),1)])]),e("view",Fo,[e("view",To,[t[5]||(t[5]=e("text",{class:"section-icon"},"ğŸ‘¤",-1)),t[6]||(t[6]=e("text",{class:"section-title"},"å®¢æˆ·ä¿¡æ¯",-1)),_(S,{size:"mini",type:"plain",onClick:t[0]||(t[0]=u=>H(1))},{default:y(()=>t[4]||(t[4]=[V(" ä¿®æ”¹ ",-1)])),_:1,__:[4]})]),e("view",So,[e("view",No,[t[7]||(t[7]=e("text",{class:"info-label"},"å§“å",-1)),e("text",qo,o(i.customerForm.customerName),1)]),e("view",Io,[t[8]||(t[8]=e("text",{class:"info-label"},"ç”µè¯",-1)),e("text",Do,o(R(i.customerForm.customerPhone)),1)]),i.customerForm.customerWechat?(a(),r("view",Mo,[t[9]||(t[9]=e("text",{class:"info-label"},"å¾®ä¿¡",-1)),e("text",zo,o(i.customerForm.customerWechat),1)])):p("",!0),i.customerForm.customerEmail?(a(),r("view",Uo,[t[10]||(t[10]=e("text",{class:"info-label"},"é‚®ç®±",-1)),e("text",Ao,o(i.customerForm.customerEmail),1)])):p("",!0),e("view",Eo,[t[11]||(t[11]=e("text",{class:"info-label"},"å®¢æˆ·ç±»å‹",-1)),e("view",Bo,[e("text",Oo,o(j(i.customerForm.customerType)),1),L(i.customerForm.customerType)>0?(a(),r("text",Ro,o(L(i.customerForm.customerType))+"%ä¼˜æƒ  ",1)):p("",!0)])])]),i.customerForm.customerAddress?(a(),r("view",Wo,[t[12]||(t[12]=e("text",{class:"info-label"},"åœ°å€",-1)),e("text",Qo,o(i.customerForm.customerProvince)+" "+o(i.customerForm.customerCity)+" "+o(i.customerForm.customerAddress),1)])):p("",!0),i.customerForm.customerRemark?(a(),r("view",jo,[t[13]||(t[13]=e("text",{class:"info-label"},"å¤‡æ³¨",-1)),e("text",Lo,o(i.customerForm.customerRemark),1)])):p("",!0)]),e("view",Ho,[e("view",Jo,[t[15]||(t[15]=e("text",{class:"section-icon"},"ğŸ“¦",-1)),e("text",Ko,"é€‰æ‹©äº§å“ ("+o(i.selectedProducts.length)+"ç§)",1),_(S,{size:"mini",type:"plain",onClick:t[1]||(t[1]=u=>H(2))},{default:y(()=>t[14]||(t[14]=[V(" ä¿®æ”¹ ",-1)])),_:1,__:[14]})]),e("view",Yo,[(a(!0),r(se,null,oe(i.selectedProducts,(u,h)=>(a(),r("view",{key:`${u.product.id}-${u.skuId||"default"}`,class:"product-item"},[e("image",{class:"product-image",src:u.product.image||"/static/images/default-product.png",mode:"aspectFill"},null,8,Zo),e("view",Go,[e("text",Xo,o(u.product.name),1),e("text",el,[V(o(u.product.model)+" ",1),u.skuName?(a(),r("text",tl," - "+o(u.skuName),1)):p("",!0)]),e("view",sl,[e("text",ol,"å•ä»·: Â¥"+o(u.price),1),e("text",ll,"æ•°é‡: "+o(u.quantity)+o(u.product.unit||"ä¸ª"),1),e("text",al,"å°è®¡: Â¥"+o(u.subtotal.toFixed(2)),1)])])]))),128))])]),e("view",il,[e("view",nl,[t[17]||(t[17]=e("text",{class:"section-icon"},"ğŸ’°",-1)),t[18]||(t[18]=e("text",{class:"section-title"},"ä»·æ ¼é…ç½®",-1)),_(S,{size:"mini",type:"plain",onClick:t[2]||(t[2]=u=>H(3))},{default:y(()=>t[16]||(t[16]=[V(" ä¿®æ”¹ ",-1)])),_:1,__:[16]})]),e("view",rl,[e("view",ul,[t[20]||(t[20]=e("text",{class:"group-title"},"åŸºç¡€è´¹ç”¨",-1)),e("view",cl,[t[19]||(t[19]=e("text",{class:"item-label"},"äº§å“å°è®¡",-1)),e("text",dl,"Â¥"+o(w.value.toFixed(2)),1)])]),z.value?(a(),r("view",ml,[t[22]||(t[22]=e("text",{class:"group-title"},"ä¼˜æƒ æŠ˜æ‰£",-1)),I.value>0?(a(),r("view",vl,[e("text",pl,o(j(i.customerForm.customerType))+"ä¼˜æƒ ",1),e("text",fl,"-Â¥"+o(I.value.toFixed(2)),1)])):p("",!0),E.value>0?(a(),r("view",gl,[e("text",_l," é¢å¤–æŠ˜æ‰£ ("+o(i.pricingConfig.discountType==="percentage"?`${i.pricingConfig.discountValue}%`:`Â¥${i.pricingConfig.discountValue}`)+") ",1),e("text",yl,"-Â¥"+o(E.value.toFixed(2)),1)])):p("",!0),e("view",wl,[t[21]||(t[21]=e("text",{class:"item-label"},"æŠ˜æ‰£åå°è®¡",-1)),e("text",xl,"Â¥"+o(M.value.toFixed(2)),1)])])):p("",!0),q.value?(a(),r("view",hl,[t[25]||(t[25]=e("text",{class:"group-title"},"é™„åŠ è´¹ç”¨",-1)),i.pricingConfig.deliveryFee>0?(a(),r("view",bl,[t[23]||(t[23]=e("text",{class:"item-label"},"é…é€è´¹",-1)),e("text",kl,"+Â¥"+o(i.pricingConfig.deliveryFee.toFixed(2)),1)])):p("",!0),i.pricingConfig.installationFee>0?(a(),r("view",$l,[t[24]||(t[24]=e("text",{class:"item-label"},"å®‰è£…è´¹",-1)),e("text",Cl,"+Â¥"+o(i.pricingConfig.installationFee.toFixed(2)),1)])):p("",!0),(a(!0),r(se,null,oe(i.pricingConfig.otherCharges,u=>(a(),r("view",{key:u.id,class:"breakdown-item"},[e("text",Pl,o(u.name),1),e("text",Vl,"+Â¥"+o(G(u).toFixed(2)),1)]))),128))])):p("",!0),b.value>0?(a(),r("view",Fl,[t[26]||(t[26]=e("text",{class:"group-title"},"ç¨è´¹",-1)),e("view",Tl,[e("text",Sl,"å¢å€¼ç¨ ("+o(i.pricingConfig.taxRate)+"%)",1),e("text",Nl,"+Â¥"+o(b.value.toFixed(2)),1)])])):p("",!0),e("view",ql,[e("view",Il,[t[27]||(t[27]=e("text",{class:"item-label"},"åˆè®¡é‡‘é¢",-1)),e("text",Dl,"Â¥"+o(i.totalPrice.toFixed(2)),1)]),D.value>0?(a(),r("view",Ml,[e("text",zl,"å·²ä¸ºæ‚¨èŠ‚çœ Â¥"+o(D.value.toFixed(2)),1)])):p("",!0)])])]),e("view",Ul,[t[32]||(t[32]=e("view",{class:"section-header"},[e("text",{class:"section-icon"},"ğŸ“‹"),e("text",{class:"section-title"},"æŠ¥ä»·æ¡æ¬¾")],-1)),e("view",Al,[e("view",El,[t[28]||(t[28]=e("text",{class:"term-label"},"æŠ¥ä»·æœ‰æ•ˆæœŸ",-1)),e("text",Bl,o(i.quoteMetadata.validityDays)+"å¤© (è‡³"+o(J())+")",1)]),e("view",Ol,[t[29]||(t[29]=e("text",{class:"term-label"},"ä»˜æ¬¾æ¡ä»¶",-1)),e("text",Rl,o(Z(i.quoteMetadata.paymentTerms)),1)]),i.pricingConfig.taxIncluded?(a(),r("view",Wl,t[30]||(t[30]=[e("text",{class:"term-label"},"ä»·æ ¼è¯´æ˜",-1),e("text",{class:"term-value"},"ä»¥ä¸Šä»·æ ¼ä¸ºå«ç¨ä»·æ ¼",-1)]))):p("",!0),t[31]||(t[31]=e("view",{class:"term-item"},[e("text",{class:"term-label"},"æŠ¥ä»·è¯´æ˜"),e("text",{class:"term-value"},"æœ¬æŠ¥ä»·ä»…å¯¹æœ¬æ¬¡è¯¢ä»·æœ‰æ•ˆï¼Œå¦‚æœ‰å˜åŠ¨æ•ä¸å¦è¡Œé€šçŸ¥")],-1))])]),i.quoteMetadata.specialTerms?(a(),r("view",Ql,[t[33]||(t[33]=e("view",{class:"section-header"},[e("text",{class:"section-icon"},"ğŸ“"),e("text",{class:"section-title"},"ç‰¹æ®Šæ¡æ¬¾")],-1)),e("view",jl,[e("text",Ll,o(i.quoteMetadata.specialTerms),1)])])):p("",!0),e("view",Hl,[e("view",Jl,[t[35]||(t[35]=e("text",{class:"summary-text"},"è¯·ç¡®è®¤ä»¥ä¸Šä¿¡æ¯æ— è¯¯",-1)),e("view",Kl,[t[34]||(t[34]=e("text",{class:"total-label"},"åˆè®¡é‡‘é¢ï¼š",-1)),e("text",Yl,"Â¥"+o(i.totalPrice.toFixed(2)),1)])]),e("view",Zl,[_(S,{type:"default",onClick:f},{default:y(()=>t[36]||(t[36]=[V(" è¿”å›ä¿®æ”¹ ",-1)])),_:1,__:[36]}),_(S,{type:"primary",onClick:g,loading:i.submitting,class:"submit-button"},{default:y(()=>t[37]||(t[37]=[V(" ç¡®è®¤ç”ŸæˆæŠ¥ä»· ",-1)])),_:1,__:[37]},8,["loading"])])]),s.value?(a(),r("view",Gl,t[38]||(t[38]=[e("view",{class:"success-content"},[e("text",{class:"success-icon"},"âœ…"),e("text",{class:"success-title"},"æŠ¥ä»·ç”ŸæˆæˆåŠŸï¼"),e("text",{class:"success-subtitle"},"æ­£åœ¨è·³è½¬åˆ°æŠ¥ä»·é¢„è§ˆ...")],-1)]))):p("",!0)]))}}),ea=ne(Xl,[["__scopeId","data-v-8f0f34d9"]]),ta={class:"quote-wizard"},sa={class:"wizard-progress"},oa={class:"progress-container"},la={class:"progress-bar"},aa={class:"progress-steps"},ia={class:"step-circle"},na={key:0,class:"step-check"},ra={key:1,class:"step-number"},ua={class:"step-label"},ca={class:"wizard-content"},da={key:0,class:"wizard-nav"},ma={key:1,class:"price-sticky"},va={class:"price-summary"},pa={class:"price-value"},_e=4,fa=ie({__name:"QuoteWizard",setup(ee){const k=T(1),c=T(!1),U=[{name:"å®¢æˆ·ä¿¡æ¯",icon:"ğŸ‘¤"},{name:"é€‰æ‹©äº§å“",icon:"ğŸ“¦"},{name:"ä»·æ ¼é…ç½®",icon:"ğŸ’°"},{name:"ç¡®è®¤æäº¤",icon:"âœ“"}],s=re({customerName:"",customerPhone:"",customerWechat:"",customerEmail:"",customerProvince:"",customerCity:"",customerAddress:"",customerType:"individual",customerRemark:"",saveCustomer:!0}),P=re({customerName:"",customerPhone:"",customerWechat:"",customerEmail:"",customerAddress:""}),v=T([]),w=re({discountType:"percentage",discountValue:0,taxRate:13,taxIncluded:!1,deliveryFee:0,installationFee:0,otherCharges:[]}),I=re({quoteNumber:"",validityDays:30,paymentTerms:"immediate",specialTerms:"",images:[]}),E=T([{id:"tables",name:"å°çƒæ¡Œ",icon:"ğŸ±"},{id:"cues",name:"çƒæ†",icon:"ğŸ¯"},{id:"balls",name:"å°çƒ",icon:"âšª"},{id:"accessories",name:"é…ä»¶",icon:"ğŸ”§"},{id:"maintenance",name:"ç»´æŠ¤ç”¨å“",icon:"ğŸ§½"}]),F=$(()=>!0),M=$(()=>{switch(k.value){case 1:return s.customerName&&s.customerPhone;case 2:return v.value.length>0;case 3:return!0;case 4:return!0;default:return!1}}),Q=$(()=>v.value.reduce((f,g)=>f+g.subtotal,0)),b=$(()=>{let f=Q.value;return w.discountType==="percentage"?f=f*(1-w.discountValue/100):f=f-w.discountValue,f+=w.deliveryFee+w.installationFee,w.otherCharges.forEach(g=>{g.type==="percentage"?f+=f*(g.amount/100):f+=g.amount}),w.taxIncluded||(f+=f*(w.taxRate/100)),Math.max(0,f)}),z=()=>{var f;M.value&&k.value<_e&&(k.value++,Z(),$e.report("wizard_step_complete",{step:k.value-1,step_name:(f=U[k.value-2])==null?void 0:f.name}))},q=()=>{k.value>1&&k.value--},D=f=>{console.log("QuoteWizard: Received form update",f),Object.assign(s,f)},B=()=>{L()&&z()},R=()=>{v.value.length>0?z():ae.show("è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªäº§å“","none")},j=()=>{z()},L=()=>{let f=!0;return Object.keys(P).forEach(g=>{P[g]=""}),s.customerName.trim()||(P.customerName="è¯·è¾“å…¥å®¢æˆ·å§“å",f=!1),s.customerPhone.trim()?/^1[3-9]\d{9}$/.test(s.customerPhone)||(P.customerPhone="è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ",f=!1):(P.customerPhone="è¯·è¾“å…¥è”ç³»ç”µè¯",f=!1),s.customerEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.customerEmail)&&(P.customerEmail="è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼",f=!1),f},J=()=>{const g=new Date().toISOString().slice(0,10).replace(/-/g,""),i=Math.floor(Math.random()*9999).toString().padStart(4,"0");I.quoteNumber=`YS-${g}-${i}`},Z=()=>{try{const f={currentStep:k.value,customerForm:s,selectedProducts:v.value,pricingConfig:w,quoteMetadata:I,timestamp:Date.now()};ge.setJSON("quote_wizard_draft",f)}catch(f){console.warn("Failed to save draft:",f)}},G=()=>{try{const f=ge.getJSON("quote_wizard_draft");f&&Date.now()-f.timestamp<24*60*60*1e3&&(k.value=f.currentStep||1,Object.assign(s,f.customerForm||{}),v.value=f.selectedProducts||[],Object.assign(w,f.pricingConfig||{}),Object.assign(I,f.quoteMetadata||{}))}catch(f){console.warn("Failed to load draft:",f)}},H=async()=>{var f;if(M.value){c.value=!0;try{const g={customer:s,items:v.value.map(t=>({product_id:t.product.id,product_name:t.product.name,quantity:t.quantity,unit_price:t.price,total_price:t.subtotal})),pricing:{subtotal:Q.value,discount:w.discountType==="percentage"?{type:"percentage",value:w.discountValue}:{type:"fixed",value:w.discountValue},finalTotal:b.value},quote:I},i=await Se.createQuote(g);if(i.success)ge.removeItem("quote_wizard_draft"),ae.success("æŠ¥ä»·åˆ›å»ºæˆåŠŸ"),setTimeout(()=>{var t;Ne.redirectTo(`/sales/quote/preview?id=${(t=i.data)==null?void 0:t.id}`)},1500);else throw new Error(((f=i.error)==null?void 0:f.message)||"åˆ›å»ºå¤±è´¥")}catch(g){ae.error(g.message||"åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{c.value=!1}}};return we(()=>{G(),J(),$e.report("quote_wizard_start",{user_type:"sales",timestamp:Date.now()})}),(f,g)=>(a(),r("view",ta,[_(Pe,{title:"æ–°å»ºæŠ¥ä»·","show-back":!0,fixed:!0}),e("view",sa,[e("view",oa,[e("view",la,[e("view",{class:"progress-fill",style:Ce({width:`${k.value/_e*100}%`})},null,4)]),e("view",aa,[(a(),r(se,null,oe(U,(i,t)=>e("view",{key:t,class:Y(["progress-step",{"progress-step--active":k.value>t,"progress-step--current":k.value===t+1}])},[e("view",ia,[k.value>t+1?(a(),r("text",na,"âœ“")):(a(),r("text",ra,o(t+1),1))]),e("text",ua,o(i.name),1)],2)),64))])])]),e("view",ca,[k.value===1?(a(),te(nt,{key:0,form:s,"onUpdate:form":[g[0]||(g[0]=i=>s=i),D],errors:P,onNext:B,onValidate:L},null,8,["form","errors"])):k.value===2?(a(),te(_s,{key:1,selectedProducts:v.value,"onUpdate:selectedProducts":g[1]||(g[1]=i=>v.value=i),categories:E.value,onNext:R,onBack:g[2]||(g[2]=i=>k.value=1)},null,8,["selectedProducts","categories"])):k.value===3?(a(),te(xo,{key:2,config:w,"onUpdate:config":g[3]||(g[3]=i=>w=i),selectedProducts:v.value,customerType:s.customerType,onNext:j,onBack:g[4]||(g[4]=i=>k.value=2)},null,8,["config","selectedProducts","customerType"])):k.value===4?(a(),te(ea,{key:3,customerForm:s,selectedProducts:v.value,pricingConfig:w,quoteMetadata:I,totalPrice:b.value,onSubmit:H,onBack:g[5]||(g[5]=i=>k.value=3),submitting:c.value},null,8,["customerForm","selectedProducts","pricingConfig","quoteMetadata","totalPrice","submitting"])):p("",!0)]),F.value?(a(),r("view",da,[k.value>1?(a(),te(S,{key:0,type:"default",onClick:q,block:!1,class:"nav-back"},{default:y(()=>g[6]||(g[6]=[V(" ä¸Šä¸€æ­¥ ",-1)])),_:1,__:[6]})):p("",!0),g[9]||(g[9]=e("view",{class:"nav-spacer"},null,-1)),k.value<_e?(a(),te(S,{key:1,type:"primary",onClick:z,block:!1,disabled:!M.value,class:"nav-next"},{default:y(()=>g[7]||(g[7]=[V(" ä¸‹ä¸€æ­¥ ",-1)])),_:1,__:[7]},8,["disabled"])):(a(),te(S,{key:2,type:"primary",onClick:H,loading:c.value,block:!1,class:"nav-submit"},{default:y(()=>g[8]||(g[8]=[V(" ç”ŸæˆæŠ¥ä»· ",-1)])),_:1,__:[8]},8,["loading"]))])):p("",!0),k.value>=2&&v.value.length>0?(a(),r("view",ma,[e("view",va,[g[10]||(g[10]=e("text",{class:"price-label"},"åˆè®¡ï¼š",-1)),e("text",pa,"Â¥"+o(b.value.toFixed(2)),1)])])):p("",!0)]))}}),ga=ne(fa,[["__scopeId","data-v-2b9e8bd7"]]),_a={class:"sales-container"},ya=ie({__name:"create",setup(ee){return(k,c)=>(a(),r("view",_a,[_(ga)]))}}),ka=ne(ya,[["__scopeId","data-v-8e0800d1"]]);export{ka as default};
