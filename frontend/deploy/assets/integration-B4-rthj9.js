const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-DqkBhIqL.js","assets/index.standard-DHpxIVC0.js","assets/index-CIRSQFo7.css"])))=>i.map(i=>d[i]);
import{d as Q,r as m,Y as l,_ as R,i as u,o as q,c as n,j as d,a as e,n as v,t as o,F as k,f as T,g as r,b as _}from"./index.standard-DHpxIVC0.js";import{u as B}from"./app-DqkBhIqL.js";import{a as M,S as L}from"./SalesButton-Bck0Vs7e.js";import{L as E}from"./LoadingSkeleton-DpDZhGq1.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"integration-test-page"},J={class:"test-container"},U={class:"test-overview"},Y={class:"stat-number"},G={class:"test-stat-card success"},K={class:"stat-number"},W={class:"test-stat-card error"},X={class:"stat-number"},Z={class:"test-controls"},tt={class:"test-results"},st={class:"test-section"},et={class:"test-info"},at={class:"test-name"},ot={class:"test-description"},nt={class:"test-status"},rt={class:"status-icon"},it={class:"status-text"},ct={key:0,class:"test-error"},lt={class:"error-message"},ut={key:1,class:"test-result"},dt={class:"result-data"},pt={class:"test-section"},ht={class:"test-info"},mt={class:"test-name"},vt={class:"test-description"},_t={class:"test-status"},wt={class:"status-icon"},gt={class:"status-text"},ft={key:0,class:"test-error"},yt={class:"error-message"},St={class:"test-section"},xt={class:"test-info"},kt={class:"test-name"},Tt={class:"test-description"},Et={class:"test-status"},At={class:"status-icon"},bt={class:"status-text"},Pt={key:0,class:"test-error"},Ft={class:"error-message"},It={class:"test-section"},Ct={class:"component-showcase"},Bt={class:"showcase-item"},Lt={class:"showcase-item"},Vt={class:"showcase-item"},$t=Q({__name:"integration",setup(Ht){const p=m(!1),i=B(),A=m([{name:"APIæœåŠ¡å¯¼å…¥",description:"éªŒè¯ApiServiceèƒ½å¤Ÿæ­£ç¡®å¯¼å…¥",status:"pending",async testFn(){if(typeof l!="object")throw new Error("ApiServiceå¯¼å…¥å¤±è´¥");if(typeof l.getProducts!="function")throw new Error("getProductsæ–¹æ³•ä¸å­˜åœ¨");if(typeof l.getSalesStats!="function")throw new Error("getSalesStatsæ–¹æ³•ä¸å­˜åœ¨");this.result={importSuccess:!0,methods:["getProducts","getSalesStats","getQuotes"]}}},{name:"äº§å“æ•°æ®è·å–",description:"æµ‹è¯•äº§å“APIæ•°æ®è·å–åŠŸèƒ½",status:"pending",async testFn(){var s,a;try{const t=await l.getProducts({limit:3});if(this.result={success:t.success,hasData:!!t.data,dataLength:((s=t.data)==null?void 0:s.length)||0,errorCode:(a=t.error)==null?void 0:a.code},!t.success&&!t.error)throw new Error("APIå“åº”æ ¼å¼å¼‚å¸¸");if(t.success&&t.data&&t.data.length>0){const S=t.data[0],x=["id","name","model","price","unit"];for(const h of x)if(!(h in S))throw new Error(`äº§å“æ•°æ®ç¼ºå°‘å¿…éœ€å­—æ®µ: ${h}`)}}catch(t){throw this.result={networkError:!0,message:t.message},t}}},{name:"ç»Ÿè®¡æ•°æ®è·å–",description:"æµ‹è¯•é”€å”®ç»Ÿè®¡APIåŠŸèƒ½",status:"pending",async testFn(){var s,a;try{const t=await l.getSalesStats();if(this.result={success:t.success,hasStats:!!t.data,hasTotalQuotes:((s=t.data)==null?void 0:s.totalQuotes)!==void 0,errorCode:(a=t.error)==null?void 0:a.code},!t.success&&!t.error)throw new Error("ç»Ÿè®¡APIå“åº”æ ¼å¼å¼‚å¸¸")}catch(t){throw this.result={networkError:!0,message:t.message},t}}},{name:"å¥åº·æ£€æŸ¥",description:"æµ‹è¯•APIå¥åº·æ£€æŸ¥åŠŸèƒ½",status:"pending",async testFn(){var a,t;if(typeof l.healthCheck!="function"){const{checkApiHealth:S}=await R(async()=>{const{checkApiHealth:h}=await import("./app-DqkBhIqL.js").then(j=>j.i);return{checkApiHealth:h}},__vite__mapDeps([0,1,2])),x=await S();this.result={healthy:x,method:"checkApiHealth (fallback)"};return}const s=await l.healthCheck();this.result={success:s.success,status:(a=s.data)==null?void 0:a.status,services:(t=s.data)==null?void 0:t.services}}}]),b=m([{name:"Storeå¯¼å…¥",description:"éªŒè¯useAppStoreèƒ½å¤Ÿæ­£ç¡®å¯¼å…¥å’Œåˆå§‹åŒ–",status:"pending",async testFn(){if(typeof B!="function")throw new Error("useAppStoreå¯¼å…¥å¤±è´¥");if(!i)throw new Error("appStoreå®ä¾‹åŒ–å¤±è´¥");const s=["updateSettings","loadSettings"];for(const a of s)if(typeof i[a]!="function")throw new Error(`Storeç¼ºå°‘æ–¹æ³•: ${a}`);this.result={storeInstance:!!i,methods:s,hasSettings:"settings"in i}}},{name:"è®¾ç½®è¯»å–",description:"æµ‹è¯•è®¾ç½®æ•°æ®çš„è¯»å–åŠŸèƒ½",status:"pending",async testFn(){try{i.loadSettings(),this.result={settingsLoaded:!0,settingsType:typeof i.settings,hasAutoSave:"autoSave"in i.settings}}catch(s){throw new Error(`è®¾ç½®è¯»å–å¤±è´¥: ${s.message}`)}}},{name:"è®¾ç½®æ›´æ–°",description:"æµ‹è¯•è®¾ç½®æ•°æ®çš„æ›´æ–°åŠŸèƒ½",status:"pending",async testFn(){try{const s={testValue:`test_${Date.now()}`};i.updateSettings(s),this.result={updateSuccess:!0,settingsUpdated:i.settings.testValue===s.testValue}}catch(s){throw new Error(`è®¾ç½®æ›´æ–°å¤±è´¥: ${s.message}`)}}}]),P=m([{name:"LoadingSkeletonç»„ä»¶",description:"éªŒè¯LoadingSkeletonç»„ä»¶èƒ½å¤Ÿæ­£ç¡®å¯¼å…¥å’Œä½¿ç”¨",status:"pending",async testFn(){this.result={componentImported:!0,variants:["product","list","stats","card","form"]}}},{name:"åŠ¨ç”»æ ·å¼",description:"éªŒè¯animations.scssæ ·å¼æ–‡ä»¶èƒ½å¤Ÿæ­£ç¡®å¯¼å…¥",status:"pending",async testFn(){const s=document.createElement("div");s.className="fade-enter-active",document.body.appendChild(s);const a=window.getComputedStyle(s),t=a.transitionProperty!=="none";if(document.body.removeChild(s),this.result={animationStylesLoaded:t,transitionProperty:a.transitionProperty},!t)throw new Error("åŠ¨ç”»æ ·å¼æœªæ­£ç¡®åŠ è½½")}},{name:"Salesç»„ä»¶é›†æˆ",description:"éªŒè¯Salesç³»åˆ—ç»„ä»¶èƒ½å¤Ÿæ­£ç¡®å¯¼å…¥",status:"pending",async testFn(){this.result={salesHeaderImported:!0,salesButtonImported:!0}}}]),c=u(()=>[...A.value,...b.value,...P.value]),w=u(()=>c.value.length),F=u(()=>c.value.filter(s=>s.status!=="pending"&&s.status!=="running").length),I=u(()=>c.value.filter(s=>s.status==="passed").length),g=u(()=>c.value.filter(s=>s.status==="failed").length),C=u(()=>F.value===w.value&&g.value===0),V=u(()=>g.value>0);async function $(){if(!p.value){p.value=!0;try{c.value.forEach(s=>{s.status="pending",s.result=void 0,s.error=void 0});for(const s of c.value){s.status="running";try{await s.testFn.call(s),s.status="passed"}catch(a){s.status="failed",s.error=a.message}await new Promise(a=>setTimeout(a,100))}uni.showToast({title:`æµ‹è¯•å®Œæˆ: ${I.value}/${w.value} é€šè¿‡`,icon:C.value?"success":"none",duration:3e3})}finally{p.value=!1}}}function H(){c.value.forEach(s=>{s.status="pending",s.result=void 0,s.error=void 0})}function f(s){switch(s){case"pending":return"â³";case"running":return"âš¡";case"passed":return"âœ…";case"failed":return"âŒ";default:return"â“"}}function y(s){switch(s){case"pending":return"ç­‰å¾…ä¸­";case"running":return"è¿è¡Œä¸­";case"passed":return"é€šè¿‡";case"failed":return"å¤±è´¥";default:return"æœªçŸ¥"}}function N(s){return typeof s=="object"?JSON.stringify(s,null,2):String(s)}function D(){uni.navigateBack()}return q(()=>{uni.setNavigationBarTitle({title:"Terminal 2 é›†æˆæµ‹è¯•"})}),(s,a)=>(r(),n("view",z,[d(M,{title:"é›†æˆæµ‹è¯•é¡µé¢","show-back":!0,onBack:D}),e("view",J,[a[11]||(a[11]=e("view",{class:"test-header"},[e("text",{class:"test-title"},"Terminal 2 é›†æˆæµ‹è¯•"),e("text",{class:"test-subtitle"},"éªŒè¯ä¸Terminal 1åŸºç¡€è®¾æ–½çš„é›†æˆ")],-1)),e("view",U,[e("view",{class:v(["test-stat-card",{success:C.value,error:V.value}])},[e("text",Y,o(F.value)+"/"+o(w.value),1),a[0]||(a[0]=e("text",{class:"stat-label"},"æµ‹è¯•å®Œæˆ",-1))],2),e("view",G,[e("text",K,o(I.value),1),a[1]||(a[1]=e("text",{class:"stat-label"},"é€šè¿‡",-1))]),e("view",W,[e("text",X,o(g.value),1),a[2]||(a[2]=e("text",{class:"stat-label"},"å¤±è´¥",-1))])]),e("view",Z,[d(L,{text:"è¿è¡Œæ‰€æœ‰æµ‹è¯•",type:"primary",loading:p.value,onClick:$},null,8,["loading"]),d(L,{text:"æ¸…é™¤ç»“æœ",type:"outline",onClick:H})]),e("view",tt,[e("view",st,[a[4]||(a[4]=e("text",{class:"section-title"},"ğŸ”— APIæœåŠ¡é›†æˆæµ‹è¯•",-1)),(r(!0),n(k,null,T(A.value,t=>(r(),n("view",{key:t.name,class:v(["test-item",t.status])},[e("view",et,[e("text",at,o(t.name),1),e("text",ot,o(t.description),1)]),e("view",nt,[e("text",rt,o(f(t.status)),1),e("text",it,o(y(t.status)),1)]),t.error?(r(),n("view",ct,[e("text",lt,o(t.error),1)])):_("",!0),t.result?(r(),n("view",ut,[a[3]||(a[3]=e("text",{class:"result-label"},"ç»“æœ:",-1)),e("text",dt,o(N(t.result)),1)])):_("",!0)],2))),128))]),e("view",pt,[a[5]||(a[5]=e("text",{class:"section-title"},"ğŸ—‚ï¸ StoreçŠ¶æ€ç®¡ç†æµ‹è¯•",-1)),(r(!0),n(k,null,T(b.value,t=>(r(),n("view",{key:t.name,class:v(["test-item",t.status])},[e("view",ht,[e("text",mt,o(t.name),1),e("text",vt,o(t.description),1)]),e("view",_t,[e("text",wt,o(f(t.status)),1),e("text",gt,o(y(t.status)),1)]),t.error?(r(),n("view",ft,[e("text",yt,o(t.error),1)])):_("",!0)],2))),128))]),e("view",St,[a[6]||(a[6]=e("text",{class:"section-title"},"ğŸ§© ç»„ä»¶ä¾èµ–æµ‹è¯•",-1)),(r(!0),n(k,null,T(P.value,t=>(r(),n("view",{key:t.name,class:v(["test-item",t.status])},[e("view",xt,[e("text",kt,o(t.name),1),e("text",Tt,o(t.description),1)]),e("view",Et,[e("text",At,o(f(t.status)),1),e("text",bt,o(y(t.status)),1)]),t.error?(r(),n("view",Pt,[e("text",Ft,o(t.error),1)])):_("",!0)],2))),128))])]),e("view",It,[a[10]||(a[10]=e("text",{class:"section-title"},"ğŸ¨ ç»„ä»¶å±•ç¤ºæµ‹è¯•",-1)),e("view",Ct,[e("view",Bt,[a[7]||(a[7]=e("text",{class:"showcase-label"},"äº§å“éª¨æ¶å±:",-1)),d(E,{variant:"product","item-count":3,"custom-class":"showcase-skeleton"})]),e("view",Lt,[a[8]||(a[8]=e("text",{class:"showcase-label"},"åˆ—è¡¨éª¨æ¶å±:",-1)),d(E,{variant:"list","item-count":2,"custom-class":"showcase-skeleton"})]),e("view",Vt,[a[9]||(a[9]=e("text",{class:"showcase-label"},"ç»Ÿè®¡éª¨æ¶å±:",-1)),d(E,{variant:"stats","item-count":2,"custom-class":"showcase-skeleton"})])])])])]))}}),qt=O($t,[["__scopeId","data-v-97dae0d6"]]);export{qt as default};
