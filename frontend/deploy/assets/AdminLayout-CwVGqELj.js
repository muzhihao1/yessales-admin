import{d as M,L as P,r,i as z,o as A,M as I,c as i,a as e,b as p,t as d,G as x,j as N,y as T,k as $,n as f,J as B,g as l,F as E,f as V}from"./index.standard-DHpxIVC0.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"admin-layout"},R={class:"admin-header"},U={class:"header-right"},j={class:"user-name"},q={class:"user-role"},D={key:0,class:"user-menu"},G={class:"sidebar-menu"},J=["onClick"],O={class:"menu-icon"},H={key:0,class:"menu-text"},K=M({__name:"AdminLayout",setup(Q){const v=P(),n=r(!1),o=r(!1),u=r(""),c=r(!1),h=z(()=>c.value&&!n.value),k=[{title:"仪表盘",icon:"📊",path:"/pages/admin/dashboard/index"},{title:"报价单管理",icon:"📋",path:"/pages/admin/quotes/index"},{title:"产品管理",icon:"📦",path:"/pages/admin/products/index"},{title:"客户管理",icon:"👥",path:"/pages/admin/customers/index"},{title:"用户管理",icon:"👤",path:"/pages/admin/users/index"},{title:"操作日志",icon:"📝",path:"/pages/admin/logs/index"},{title:"系统设置",icon:"⚙️",path:"/pages/admin/settings/index"}],_=()=>{n.value=!n.value},C=t=>{u.value!==t&&(u.value=t,uni.navigateTo({url:t}),c.value&&(n.value=!0))},y=()=>{o.value=!1,uni.navigateTo({url:"/pages/admin/profile/index"})},b=()=>{o.value=!1,uni.navigateTo({url:"/pages/admin/password/index"})},S=()=>{uni.showModal({title:"提示",content:"确定要退出登录吗？",success:t=>{t.confirm&&v.logout()}})},m=()=>{const t=uni.getSystemInfoSync();c.value=t.windowWidth<768,c.value&&(n.value=!0)},g=t=>{o.value&&(o.value=!1)};return A(()=>{m();const t=getCurrentPages();if(t.length>0){const s=t[t.length-1];u.value="/"+s.route}uni.onWindowResize(m),document.addEventListener("click",g)}),I(()=>{uni.offWindowResize(m),document.removeEventListener("click",g)}),(t,s)=>{var w;const L=T("scroll-view");return l(),i("view",F,[e("view",R,[e("view",{class:"header-left"},[e("view",{class:"menu-toggle",onClick:_},s[2]||(s[2]=[e("text",{class:"iconfont icon-menu"},"☰",-1)])),s[3]||(s[3]=e("text",{class:"header-title"},"耶氏台球报价系统",-1))]),e("view",U,[e("view",{class:"user-info",onClick:s[0]||(s[0]=a=>o.value=!o.value)},[e("text",j,d(x(v).userName),1),e("text",q,d(((w=x(v).user)==null?void 0:w.role)==="admin"?"管理员":"销售员"),1)]),o.value?(l(),i("view",D,[e("view",{class:"menu-item",onClick:y},s[4]||(s[4]=[e("text",{class:"iconfont icon-user"},"👤",-1),e("text",null,"个人信息",-1)])),e("view",{class:"menu-item",onClick:b},s[5]||(s[5]=[e("text",{class:"iconfont icon-lock"},"🔒",-1),e("text",null,"修改密码",-1)])),s[7]||(s[7]=e("view",{class:"menu-divider"},null,-1)),e("view",{class:"menu-item",onClick:S},s[6]||(s[6]=[e("text",{class:"iconfont icon-logout"},"🚪",-1),e("text",null,"退出登录",-1)]))])):p("",!0)])]),e("view",{class:f(["admin-sidebar",{collapsed:n.value}])},[N(L,{"scroll-y":"",class:"sidebar-scroll"},{default:$(()=>[e("view",G,[(l(),i(E,null,V(k,a=>e("view",{key:a.path,class:f(["menu-item",{active:u.value===a.path}]),onClick:X=>C(a.path)},[e("text",O,d(a.icon),1),n.value?p("",!0):(l(),i("text",H,d(a.title),1))],10,J)),64))])]),_:1})],2),e("view",{class:f(["admin-content",{"sidebar-collapsed":n.value}])},[B(t.$slots,"default",{},void 0)],2),h.value?(l(),i("view",{key:0,class:"sidebar-mask",onClick:s[1]||(s[1]=a=>n.value=!0)})):p("",!0)])}}}),ee=W(K,[["__scopeId","data-v-b914e08e"]]);export{ee as A};
