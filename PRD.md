/i# 耶氏台球斗南销售中心报价系统MVP PRD

### TL;DR

耶氏台球斗南销售中心报价系统旨在为销售人员和管理者提供高效、标准化的报价流程。系统支持快速生成、管理和跟踪客户报价，提升销售转化率，减少人工错误。目标用户为销售人员和门店管理员，核心价值在于提升工作效率和客户满意度。

---

## Goals

### Business Goals

* 提高销售报价效率，缩短客户响应时间（目标：报价时间缩短50%）

* 降低报价错误率，提升客户满意度（目标：错误率低于2%）

* 实现报价数据的数字化和可追溯管理

* 支持销售数据分析，辅助决策

* 降低人工管理成本

### User Goals

* 销售人员可快速生成和管理客户报价

* 管理员可实时查看、审核和统计所有报价

* 用户可随时查找历史报价，便于跟进客户

* 简化操作流程，减少重复录入

* 保证数据安全

### Non-Goals

* 不包含复杂的财务结算或订单支付功能

* 不支持多门店/多品牌管理（仅限斗南销售中心）

* 不涉及客户关系管理（CRM）高级功能

---

## 用户故事

### 销售人员

* 作为销售人员，我希望能快速录入客户信息和需求，以便高效生成报价单。

* 作为销售人员，我希望能查看和跟进历史报价，便于客户回访和二次销售。

* 作为销售人员，我希望能上传产品图片，帮助客户更好理解产品。

* 作为销售人员，我希望能在移动端操作，随时随地完成报价。

### 管理员

* 作为管理员，我希望能查看所有销售人员的报价记录，便于业绩统计和管理。

* 作为管理员，我希望能审核和修改报价单，确保报价准确无误。

* 作为管理员，我希望能导出报价数据，进行业务分析。

* 作为管理员，我希望能管理产品信息和价格，保证报价标准化。

* 作为管理员，我希望能管理销售人员账号。

---

## 功能需求

### 前台（销售端） (优先级：高)

* **Logo与品牌视觉统一**：前端需统一品牌视觉风格（logo、主色调、字体等），如无特殊要求则根据logo主色自动适配，确保品牌一致性。

* **客户信息录入**：支持快速录入客户姓名、联系方式、需求等基本信息。前端需对客户信息进行格式和长度校验（电话11位数字，姓名≤20字，备注≤100字）。

* **产品选择与配置**：可选择产品型号、数量、配置，自动计算价格。地毯类产品需支持多规格/颜色/价格，前期仅做单一SKU，后续可扩展多SKU，后台可灵活维护。

* **报价单生成**：一键生成标准化报价单（含产品明细、价格、图片等），仅支持现场展示，不支持发送。每个报价单自动生成唯一编号（建议日期+自增序号或UUID）。

* **历史报价管理**：可查询、筛选、跟进历史报价记录。历史报价单内容随产品/配件变动实时更新，不保留历史快照。

* **图片上传**：支持上传产品图片，展示在报价单中。

* **移动端适配**：支持手机、平板（iPad）等移动设备操作，页面适配良好。

### 后台（管理端） (优先级：高)

* **报价单管理**：查看、审核、修改所有报价单。

* **产品与价格管理**：增删改查产品信息、价格、图片等。地毯SKU支持多规格/颜色/价格，后台可灵活维护SKU。

* **销售人员管理**：创建、禁用销售人员账号。

* **数据导出与统计**：导出报价数据，生成销售报表。后台需有简单数据统计页面（如本月报价单数量、各品牌销量分布等），可放在首页或单独tab。

* **管理员账号**：仅有管理员账号，拥有全部后台权限。

### 后台（管理端） (优先级：中)

* **操作日志**：记录关键操作，便于追溯。

* **系统设置**：基础参数配置（如公司信息、报价模板等）。

### 交付与验收标准

* 功能全通、无重大bug

* 页面适配iPad

* 后台可用

---

## 用户体验流程

**Entry Point & First-Time User Experience**

* 用户通过固定网址访问系统首页。

* 用户端无需登录，直接访问和使用。

**Core Experience**

1. **Step 1:** 进入系统首页

  * 用户通过固定网址直接访问系统首页，无需登录。

  * 进入主界面后可直接进行报价操作。

2. **Step 2:** 新建报价单

  * 点击“新建报价”按钮，进入报价录入页面。

  * 录入客户信息（前端校验：电话11位数字，姓名≤20字，备注≤100字），选择产品及配置，自动计算价格。

  * 地毯类产品支持多规格/颜色/价格，前期仅单一SKU，后续可扩展。

  * 支持上传产品图片，实时预览。

  * 填写备注信息（可选）。

3. **Step 3:** 生成报价单

  * 一键生成标准化报价单，现场展示给客户，支持预览确认。

  * 报价单仅支持现场展示，不支持发送。

  * 每个报价单自动生成唯一编号（建议日期+自增序号或UUID）。

4. **Step 4:** 管理历史报价

  * 在“我的报价”中查看所有历史报价，支持筛选、搜索。

  * 历史报价单内容随产品/配件变动实时更新，不保留历史快照。

  * 可对未成交报价进行跟进、修改。

5. **Step 5:** 管理端操作

  * 管理员登录后，进入管理后台。

  * 查看所有报价单，支持审核、修改、导出。

  * 管理产品信息、销售人员账号。

  * 查看数据统计页面（如本月报价单数量、各品牌销量分布等）。

**Advanced Features & Edge Cases**

* 支持批量导入产品信息。

* 网络异常时自动保存草稿，防止数据丢失。

**UI/UX Highlights**

* 响应式设计，适配PC和移动端，页面适配iPad。

* 重要操作需二次确认，防止误操作。

* 颜色对比度高，保证可读性。

* 表单校验友好，错误提示明确。

* 支持快捷键和批量操作，提升效率。

* 前端统一品牌视觉风格（logo、主色调、字体等）。

---

## Narrative

在耶氏台球斗南销售中心，销售人员每天需要为大量客户提供个性化报价。传统的手工报价方式不仅耗时，还容易出错，影响客户体验和成交率。管理员也难以及时掌握销售进展和数据，管理效率低下。

引入报价系统后，销售人员只需几步即可完成客户信息录入、产品选择和报价单生成。系统自动计算价格，支持图片上传，报价单可现场展示给客户。所有历史报价都能随时查找和跟进，极大提升了工作效率。管理员则能实时查看所有报价，审核和导出数据，轻松管理产品和人员信息。后台还可灵活维护地毯SKU，支持多规格/颜色/价格，便于后续扩展。

通过这一系统，销售流程变得高效、透明，客户响应更及时，管理更科学。最终，销售中心不仅提升了客户满意度，也为业务增长和数据化管理打下坚实基础。

---

## Success Metrics

### User-Centric Metrics

* 日活跃销售人员数

* 平均每人每周生成报价单数

* 用户反馈与满意度评分

### Business Metrics

* 报价转化率提升（成交率提升目标10%）

* 管理成本降低（人工统计时间减少50%）

* 销售数据分析覆盖率

### Technical Metrics

* 系统可用性（Uptime ≥99.5%）

* 平均接口响应时间≤1秒

* 数据丢失/错误率≤0.1%

### Tracking Plan

* 用户访问事件

* 新建/修改/删除报价单

* 产品信息增删改查

* 数据导出操作

* 管理员审核操作

---

## 技术实现建议

### 前端（Uniapp）

* **技术选型**：采用 Uniapp 框架，支持一次开发多端部署（Web、微信小程序、App）。

* **页面结构**：采用组件化开发，复用表单、列表、弹窗等基础组件。

* **状态管理**：使用 Vuex 或 Pinia 管理全局状态（如用户信息、产品列表、报价单草稿等）。

* **图片上传**：集成 Supabase Storage，支持图片选择、预览、上传、回显。

* **本地缓存**：关键表单数据本地缓存，支持断网续传。

* **权限控制**：前端根据用户角色（销售/管理员）动态展示功能入口。

* **自动化测试**：集成 uni-app 官方测试工具，保障主要流程稳定。

* **品牌视觉统一**：前端需统一品牌视觉风格（logo、主色调、字体等），如无特殊要求则根据logo主色自动适配。

### 后端（Supabase）

* **数据库**：使用 Supabase PostgreSQL，结构化存储客户、产品、报价单等核心数据。

* **API服务**：通过 Supabase RESTful API 或 Edge Functions 实现业务接口。

* **认证与权限**：利用 Supabase Auth 管理销售人员和管理员账号，基于 RLS（Row Level Security）实现数据隔离。

* **图片存储**：Supabase Storage 存储产品和报价单图片，设置访问权限。

* **日志与监控**：利用 Supabase Audit Log 插件记录关键操作，便于追溯。

* **定时任务**：如需定期数据导出，可用 Edge Functions 实现。

### 部署与运维

* **前端部署**：代码托管于 Github，自动化集成 Vercel，支持预览、回滚、灰度发布。

* **后端部署**：Supabase 云服务，无需自建服务器，自动扩容与备份。

* **监控与告警**：Vercel/Supabase 提供基础监控，关键接口可接入第三方告警（如 Sentry）。

* **数据备份**：Supabase 自动每日备份，支持手动导出。

* **权限与安全**：定期审查 Supabase 权限策略，防止越权访问。

---

## 页面结构

### 用户端（销售端）

1. **首页**

  * 顶部Logo与系统名称，统一品牌视觉风格

  * 快速入口：“新建报价”、“我的报价”

  * 产品推荐/快捷入口

2. **新建报价**

  * 客户信息录入（前端校验：电话11位数字，姓名≤20字，备注≤100字）

  * 产品选择与配置（地毯SKU支持多规格/颜色/价格，前期单一SKU，后续可扩展）

  * 图片上传

  * 价格自动计算

  * 备注填写

  * 生成报价单按钮

3. **报价单预览**

  * 报价明细展示

  * 产品图片展示

  * 返回修改/确认生成

4. **我的报价**

  * 历史报价列表（筛选、搜索）

  * 报价详情查看

  * 跟进/修改未成交报价

  * 历史报价单内容随产品/配件变动实时更新，不保留历史快照

5. **个人中心**

  * 个人信息查看

  * 退出登录（如有）

### 管理端

1. **登录页**

  * 管理员账号登录

2. **仪表盘**

  * 关键数据统计（报价总数、成交率、销售排行、本月报价单数量、各品牌销量分布等）

  * 数据统计可放在首页或单独tab

3. **报价单管理**

  * 全部报价单列表（筛选、搜索、导出）

  * 审核/修改/删除报价单

  * 查看报价详情

  * 每个报价单自动生成唯一编号

4. **产品管理**

  * 产品列表（增删改查、批量导入）

  * 产品图片管理

  * 地毯SKU支持多规格/颜色/价格，后台可灵活维护SKU

5. **客户管理**

  * 客户信息列表（查看、导出）

6. **销售人员管理**

  * 账号列表（创建、禁用、重置密码）

7. **操作日志**

  * 关键操作记录

8. **系统设置**

  * 公司信息、报价模板配置

---

## 数据表设计

---

## 详细ER图（Mermaid格式）

erDiagram USERS ||--o{ QUOTES : creates CUSTOMERS ||--o{ QUOTES : has QUOTES ||--o{ QUOTE_ITEMS : contains PRODUCTS ||--o{ QUOTE_ITEMS : referenced_by ACCESSORIES ||--o{ QUOTE_ITEMS : referenced_by USERS ||--o{ LOGS : operates QUOTES ||--o{ LOGS : logs PRODUCTS ||--o{ PRODUCT_SKUS : has

```
CUSTOMERS {
    uuid id PK
    varchar name
    varchar phone
    varchar wechat
    varchar address
    text remark
    timestamp created_at
}
PRODUCTS {
    uuid id PK
    varchar name
    varchar model
    varchar category
    numeric price
    varchar unit
    varchar image_url
    text description
    boolean is_active
    timestamp created_at
}
PRODUCT_SKUS {
    uuid id PK
    uuid product_id FK
    varchar spec
    varchar color
    numeric price
    integer stock
    boolean is_active
    timestamp created_at
}
ACCESSORIES {
    uuid id PK
    varchar name
    numeric price
    varchar unit
    varchar image_url
    text description
    boolean is_active
    timestamp created_at
}
QUOTES {
    uuid id PK
    uuid customer_id FK
    uuid sales_id FK
    numeric total_price
    varchar status
    text remark
    varchar quote_no
    timestamp created_at
    timestamp updated_at
}
QUOTE_ITEMS {
    uuid id PK
    uuid quote_id FK
    uuid product_id
    varchar type
    varchar name
    varchar model
    numeric unit_price
    integer quantity
    numeric total_price
}
USERS {
    uuid id PK
    varchar username
    varchar password_hash
    varchar role
    varchar name
    varchar phone
    boolean is_active
    timestamp created_at
}
LOGS {
    uuid id PK
    uuid user_id FK
    varchar action
    varchar target_type
    uuid target_id
    text detail
    timestamp created_at
}

```

---

## 详细API接口设计

### 1\. 产品相关

获取产品列表

* **接口路径**：`GET /api/products`

* **参数**：

* **返回示例**：

{ "total": 100, "items": \[ { "id": "uuid", "name": "台球桌A", "model": "A-2023", "category": "台球桌", "price": 5000, "unit": "台", "image_url": "https://...", "description": "高端台球桌", "is_active": true, "created_at": "2024-06-01T12:00:00Z" } \] }

新增产品

* **接口路径**：`POST /api/products`

* **参数**（JSON）：

* **返回示例**：

{ "id": "uuid", "name": "台球桌A", "model": "A-2023", "category": "台球桌", "price": 5000, "unit": "台", "image_url": "https://...", "description": "高端台球桌", "is_active": true, "created_at": "2024-06-01T12:00:00Z" }

产品参数校验说明

* 所有必填字段缺失时返回400错误，提示缺失字段

* `price`必须为非负数

* `image_url`需为合法URL格式

* `name`、`model`、`category`等字段长度超限时返回错误

SKU管理（地毯）

* **接口路径**：`POST /api/product_skus`

* **参数**（JSON）：

---

### 2\. 配件相关

获取配件列表

* **接口路径**：`GET /api/accessories`

* **参数**：同产品列表

* **返回示例**：

{ "total": 20, "items": \[ { "id": "uuid", "name": "球杆", "price": 200, "unit": "支", "image_url": "https://...", "description": "优质球杆", "is_active": true, "created_at": "2024-06-01T12:00:00Z" } \] }

新增配件

* **接口路径**：`POST /api/accessories`

* **参数**：同产品新增

* **参数校验**：同产品

---

### 3\. 报价单相关

新建报价单

* **接口路径**：`POST /api/quotes`

* **参数**（JSON）：

* **items结构**：

* **返回示例**：

{ "id": "uuid", "customer_id": "uuid", "sales_id": "uuid", "total_price": 5400, "status": "pending", "remark": "", "quote_no": "20240601-001", "created_at": "2024-06-01T12:00:00Z", "items": \[ { "type": "product", "product_id": "uuid", "name": "台球桌A", "model": "A-2023", "unit_price": 5000, "quantity": 1, "total_price": 5000 }, { "type": "accessory", "product_id": "uuid", "name": "球杆", "unit_price": 200, "quantity": 2, "total_price": 400 } \] }

报价单参数校验说明

* `customer_id`、`sales_id`必须为已存在的UUID

* `items`数组不能为空，且每项`type`、`product_id`、`name`、`unit_price`、`quantity`必填

* `unit_price`、`total_price`必须为非负数

* `quantity`为正整数

* 字段类型错误或缺失时返回400错误

* 每个报价单自动生成唯一编号（建议日期+自增序号或UUID）

获取报价单列表

* **接口路径**：`GET /api/quotes`

* **参数**：

* **返回示例**：

{ "total": 10, "items": \[ { "id": "uuid", "customer": { "id": "uuid", "name": "张三" }, "sales": { "id": "uuid", "name": "李四" }, "total_price": 5400, "status": "pending", "quote_no": "20240601-001", "created_at": "2024-06-01T12:00:00Z" } \] }

获取报价单详情

* **接口路径**：`GET /api/quotes/{id}`

* **参数**：`id`（string，必填，UUID）

* **返回示例**：

{ "id": "uuid", "customer": { "id": "uuid", "name": "张三", "phone": "13800000000" }, "sales": { "id": "uuid", "name": "李四" }, "total_price": 5400, "status": "pending", "remark": "", "quote_no": "20240601-001", "created_at": "2024-06-01T12:00:00Z", "items": \[ { "type": "product", "product_id": "uuid", "name": "台球桌A", "model": "A-2023", "unit_price": 5000, "quantity": 1, "total_price": 5000 } \] }

---

### 4\. 客户相关

新增客户

* **接口路径**：`POST /api/customers`

* **参数**（JSON）：

* **返回示例**：

{ "id": "uuid", "name": "张三", "phone": "13800000000", "wechat": "zhangsan123", "address": "昆明市斗南", "remark": "", "created_at": "2024-06-01T12:00:00Z" }

客户参数校验说明

* `name`、`phone`必填，`phone`需为11位数字

* 其他字段长度超限时返回错误

---

### 5\. 管理员/销售人员相关

登录

* **接口路径**：`POST /api/auth/login`

* **参数**（JSON）：

* **返回示例**：

{ "token": "jwt-token", "user": { "id": "uuid", "username": "admin", "role": "admin", "name": "管理员" } }

新建销售人员账号

* **接口路径**：`POST /api/users`

* **参数**（JSON）：

* **返回示例**：

{ "id": "uuid", "username": "sales01", "role": "sales", "name": "李四", "phone": "13800000001", "is_active": true, "created_at": "2024-06-01T12:00:00Z" }

用户参数校验说明

* `username`唯一，重复时报错

* `password`加密存储

* `role`仅允许"sales"或"admin"

* 字段缺失或格式错误返回400

---

## 页面原型

### 用户端（销售端）

首页

* **结构**

  * 顶部Logo与系统名称，统一品牌视觉风格

  * 快速入口按钮：\[新建报价\]、\[我的报价\]

  * 产品推荐区（横向滑动，展示主推产品图片与名称）

* **交互流程**

  * 点击“新建报价”进入报价录入页

  * 点击“我的报价”进入历史报价列表

* **UI细节**

  * 按钮高亮，悬停/点击有颜色反馈

  * 产品图片圆角，加载时显示骨架屏动画

* **动画建议**

  * 页面切换淡入淡出

  * 按钮点击缩放反馈

新建报价

* **结构**

  * 客户信息表单（姓名、电话、微信、地址、备注，前端校验：电话11位数字，姓名≤20字，备注≤100字）

  * 产品/配件选择区（可多选，支持添加/删除，地毯SKU支持多规格/颜色/价格，前期单一SKU，后续可扩展）

  * 每项产品：数量、配置、单价、图片上传（支持多图，拖拽排序）

  * 总价自动计算

  * \[生成报价单\]按钮

* **交互流程**

  * 表单输入实时校验，错误提示红色下划线+气泡

  * 图片上传后自动预览，支持删除

  * 产品选择弹窗，支持搜索/筛选

* **UI细节**

  * 必填项标红星，输入框聚焦高亮

  * 生成按钮禁用态（未填完必填项时）

* **动画建议**

  * 图片上传进度条

  * 表单校验失败时抖动提示

报价单预览

* **结构**

  * 报价明细表格（产品/配件、数量、单价、小计）

  * 产品图片大图轮播

  * 总价、备注

  * \[返回修改\] \[确认生成\]按钮

* **交互流程**

  * 确认生成后弹窗提示“生成成功”

* **UI细节**

  * 表格行悬停高亮

  * 图片支持点击放大

* **动画建议**

  * 生成成功动画（如对勾弹出）

我的报价

* **结构**

  * 报价列表（客户名、总价、状态、时间）

  * 筛选（状态、时间）、搜索

  * 每行\[查看详情\]\[跟进/修改\]按钮

* **交互流程**

  * 点击查看详情弹出侧边栏/弹窗

  * 跟进/修改进入编辑页

* **UI细节**

  * 状态标签颜色区分

  * 列表加载骨架屏

* **动画建议**

  * 列表加载时骨架屏

  * 操作成功气泡提示

---

### 管理端

登录页

* **结构**

  * 用户名、密码输入框

  * \[登录\]按钮

* **交互流程**

  * 输入错误时红色提示

  * 登录中按钮loading动画

* **UI细节**

  * 输入框聚焦高亮

  * 登录按钮禁用态（未输入完整时）

* **动画建议**

  * 登录loading旋转

仪表盘

* **结构**

  * 关键数据卡片（报价总数、成交率、销售排行、本月报价单数量、各品牌销量分布等）

  * 快捷入口（报价管理、产品管理等）

* **交互流程**

  * 点击卡片跳转对应管理页

* **UI细节**

  * 卡片悬停阴影

* **动画建议**

  * 数据加载时数字滚动动画

报价单管理

* **结构**

  * 报价单列表（客户、销售、总价、状态、时间、唯一编号）

  * 筛选、搜索、导出

  * 每行\[审核\]\[修改\]\[删除\]\[查看详情\]

* **交互流程**

  * 审核/删除需二次确认弹窗

  * 修改进入编辑页

* **UI细节**

  * 状态标签颜色区分

  * 列表分页

* **动画建议**

  * 操作成功气泡提示

  * 删除时淡出动画

产品管理

* **结构**

  * 产品列表（名称、型号、单价、状态）

  * \[新增\]\[批量导入\]\[图片管理\]

  * 地毯SKU支持多规格/颜色/价格，后台可灵活维护SKU

* **交互流程**

  * 新增/编辑弹窗表单

  * 批量导入支持Excel拖拽

* **UI细节**

  * 图片缩略图展示

  * 状态切换开关

* **动画建议**

  * 图片加载骨架屏

  * 导入进度条

客户管理

* **结构**

  * 客户列表（姓名、电话、微信、地址）

  * \[查看\]\[导出\]

* **交互流程**

  * 查看详情弹窗

* **UI细节**

  * 列表分页

* **动画建议**

  * 列表加载骨架屏

销售人员管理

* **结构**

  * 账号列表（用户名、姓名、角色、状态）

  * \[创建\]\[禁用\]\[重置密码\]

* **交互流程**

  * 创建/编辑弹窗表单

  * 禁用/重置需二次确认

* **UI细节**

  * 状态切换开关

* **动画建议**

  * 操作成功气泡提示

操作日志

* **结构**

  * 操作记录列表（操作人、类型、对象、时间、详情）

* **交互流程**

  * 支持筛选、搜索

* **UI细节**

  * 列表分页

* **动画建议**

  * 列表加载骨架屏

系统设置

* **结构**

  * 公司信息、报价模板配置表单

* **交互流程**

  * 表单保存按钮

* **UI细节**

  * 表单校验提示

* **动画建议**

  * 保存成功气泡提示

---

**本PRD已系统性补充Logo与品牌视觉、地毯SKU管理、历史报价单规则、报价单编号、客户信息校验、数据统计页面、交付与验收标准等内容，便于团队查阅和直接使用。**